<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title></title>
<meta name="viewport"
	content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<meta name="Generator" content="waterrower Team">
<meta name="Author" content="waterrowerTeam">
<meta name="Keywords"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<meta name="Description"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<script src="../../js/newsite/jquery.min.js"></script>
<script src="../../js/joy.loader.js" modules="dataview"></script>
<script src="../../js/newsite/bootstrap.js"></script>
<script src="../../js/newsite/getSystemPlatform.js"></script>
<script src="../../js/joy.loader.js" modules=""></script>
<script src="../../js/engsite/wlcommon.js"></script>
<script src="../../js/newsite/cnzz.js"></script>
<link rel="stylesheet" href="../../style/prj/engsite/header.css" />
<link rel="stylesheet" href="../../style/prj/engsite/footer.css" />
<link rel="stylesheet" href="../../style/prj/engsite/wlcommon.css" />
<link rel="stylesheet" href="../../style/prj/engsite/bootstrap.min.css" />
<link rel="stylesheet" href="../../style/prj/engsite/index.css" />
</head>
<body>

	<!--头部开始-->
	<div id="top">
		<!--公共文件的路径公共部分-->
		<div id="commonpath" style="display: none;" commonpath=""></div>
	</div>
	<!--头部结束-->
	<!--头部购物车结束-->
	<!--中间部分开始-->
	<div id="wlBody">
		<!--第一张图片部分开始-->
		<div id="jumbotron">
			<img src="../../style/prj/images/waterrowerLandingPage.jpg"
				class="img-responsive backgroundImg">
			<div id="jumbotronLogo">
				<img src="../../style/prj/images/jumbotronLogo.jpg"
					alt="WaterRower &ndash; An American Fitness Brand">
				<!--	<div class="jumbotronTitle">PURITY BY DESIGN</div> -->
			</div>
		</div>
		<!--第一张图片部分结束-->
		<!--新闻和视频开始-->
		<div id="newAndVideo">
			<img id="imgForrest" src="../../style/prj/images/forrest.jpg"
				class="img-responsive backgroundImg">
			<!--新闻和视频隐藏部分，用于占据空间，跟显示部分一致，这部分视频不需要写id
			<div style="visibility: hidden">
				<div class="container-fluid">
					<div class="row">
						<div class="col-lg-1 col-md-1 col-sm-1 hidden-xs"></div>
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 new">
							<div class="newAndVideoHead">
								<div class="newAndVideoHeadTitle">新闻中心</div>
								<div class="newAndVideoHeadMore">more &gt;</div>
							</div>
							<ul id="newContain1" class="list-unstyled">
								<li>&gt;Waterrower助力BossRun黄浦江激情开赛Waterrower助力BossRun黄浦江激情开赛</li>
								<li>&gt;沃特罗伦消费者书</li>
								<li>&gt;Waterrower官方旗舰店重磅入住天猫平台</li>
								<li>&gt;沃特罗伦全体成员恭贺您新年快乐</li>
								<li>&gt;沃特罗伦消费者书</li>
								<li>&gt;Waterrower官方旗舰店重磅入住天猫平台</li>
								<li>&gt;沃特罗伦全体成员恭贺您新年快乐</li>
							</ul>
						</div>
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 video">
							<div class="newAndVideoHead">
								<div class="newAndVideoHeadTitle">视频中心</div>
								<div class="newAndVideoHeadMore">more &gt;</div>
							</div>
							<video style="padding-top: 5px;" src="" controls width="100%"
								heigt="auto"></video>

						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 hidden-xs"></div>
					</div>
				</div>
			</div> -->
			<!--新闻和视频占据空间部分结束-->

			<div id="newAndVideoContainer">
				<div class="container-fluid">
					<div class="row">
						<div class="col-lg-1 col-md-1 col-sm-1 hidden-xs"></div>
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 new">
							<div class="newAndVideoHead">
								<div class="newAndVideoHeadTitle">NEWS</div>
								<a href="newsCenter.html"
									style="text-decoration: none; color: white;"><div
										class="newAndVideoHeadMore">More&gt;</div> </a>
							</div>
							<ul id="newContain" class="list-unstyled">

							</ul>
						</div>
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 video">
							<div class="newAndVideoHead">
								<div class="newAndVideoHeadTitle">VIDEO</div>
								<a href="videoCenter.html"
									style="text-decoration: none; color: white;"><div
										class="newAndVideoHeadMore">More&gt;</div> </a>
							</div>
							<div id="divVideo">
							<video style="padding-top: 5px;" id="media" src="" controls
								width="100%" height="auto"></video>
							</div>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 hidden-xs"></div>
					</div>
				</div>
			</div>
		</div>
		<!--新闻和视频结束-->
		<!--产品介绍开始-->
		<div id="proIntro">
			<!--头部标题开始-->
			<div class="container text-center">
				<h2 id="hInfo" style="margin: 55px 0px;">PROCUCT</h2>
			</div>

		</div>
		<!--产品介绍结束-->
		<section id="big_section"></section>
		<section id="small_section"></section>

	</div>
	<!--中间部分结束-->
	<!--尾部开始-->
	<div id="footerPart"></div>
	<!--尾部结束-->
	<script>
		var wWidth=0;
		$().ready(function() {
			initTop();
			initClick();
			initBottom();
			initData();
			findSellList();//获取商品列表
			getLayout();//首页展示
			var eTop = $("#media").offset().top;//视频距离整个页面顶部的距离
			var wTop = $(window).height();//可视区域的高度			
			wWidth=$(window).width(); //浏览器当前窗口可视区域宽度
			changeHeight();
			var showFlag = true;
			$(window).resize(function() {
				wTop = $(window).height();//缩放窗口这个高度会改变，需要再取得
				changeHeight();
			});
			$(window).scroll(function() {
				var dTop = $(document).scrollTop();
				if (dTop + wTop > eTop && showFlag) {
					showFlag = false;
					$("#media").get(0).play();
				}
			});
		
		});

		//改变背景高度
		function changeHeight() {
			if ($(window).width() < 490) {
				$("#imgForrest").addClass("imgHeight"); 
			} else {
				$("#imgForrest").removeClass("imgHeight"); 
			}
			
			if($(window).width() < 768 && $(window).width() > 490){
				$("#hInfo").addClass("hInfoMargin"); 
			}else{
				$("#hInfo").removeClass("hInfoMargin"); 
			}
		}

		//搜索框
		function toSearch() {
			var searchQ = document.getElementById("searchQ").value;
			var myurl = "search.html" + "?" + "searchQ=" + searchQ;
			window.location.assign(encodeURI(myurl));
		}

		//进行初始化
		function initData() {
			http: //localhost:9092/wl/wl/cm/WlCmIndexAction.dox?action=init&_=1524202731685
			joy.getJSON("../../wl/cm/WlCmIndexEnAction.dox?action=init", {},
					function(resultObject) {
						//initFocusPic(resultObject.focusPicList); //焦点图片
						//initSellPic(resultObject.sellPicList);//商品轮播图片
						initNew(resultObject.wlCmInfoNewList);//新闻
						initVideo(resultObject.wlCmInfoVideoList); //视频
					});
			//initShopCar();//初始化购物车栏目
		}
		//新闻
		function initNew(wlCmInfoNewList) {
			var txt = "";
			if (wlCmInfoNewList != null) {
				for ( var i = 0; i < wlCmInfoNewList.length; i++) {
					ob = wlCmInfoNewList[i];
					//txt+='<li><a href="'+contentPath+'/html/site/wlCmArticle.html?infoId='+ob.infoId+'&type=new" style="font-size:15px;font-weight:bold;letter-spacing:2px;">'+autoAddEllipsis(ob.title,42)+'</a></li>';
					//txt += '<li> &gt;' + ob.title + '</li>';
					txt += '<li><a href="newsArticle.html?infoId='
							+ ob.infoId
							+ '&type=new" style="color: white;word-break: keep-all;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;"> &gt; '
							+ ob.title + '</a></li>';
				}
				$("#newContain").html("");
				$("#newContain").append(txt);
			}
		}

		//視頻
		function initVideo(wlCmInfoVideoList) {
			/* $("#media").attr("src",
					"http://7xop1q.com2.z0.glb.qiniucdn.com/row.mp4");
			$("#media").get(0).play(); */
			$("#divVideo").empty();
			txt = ' <div >';
			txt += ' <video style="padding-top: 5px;width:100%;height:auto;background:gray;" id="media" src="" controls="" ></video>';
			//txt += videoList[i];
			txt += '</div>';
			$("#divVideo").append(txt);
			
			var videoArray = new Array();
			for ( var i = 0; i < wlCmInfoVideoList.length; i++) {
				videoArray[i] = wlCmInfoVideoList[i].content;
			}
			var curVideoIndex = 0;
			var md = document.getElementById("media");
			if (videoArray.length > 0) {
				md.src = videoArray[0];
				//md.play();
			}
			md.addEventListener("ended", function() {
				curVideoIndex++;
				if (curVideoIndex == videoArray.length) {
					curVideoIndex = 0;
				}
				md.src = videoArray[curVideoIndex];
				md.play();
			});
			/**视频切换开始*/
			/* var videoArray = new Array();
			videoArray[0] = "http://www.w3school.com.cn/example/html5/mov_bbb.mp4";
			videoArray[1] = "http://www.runoob.com/try/demo_source/movie.mp4";
			var curVideoIndex = 0;
			var md = document.getElementById("media");
			if (videoArray.length > 0) {
				md.src = videoArray[0];
				md.play();
			}
			md.addEventListener("ended", function() {
				curVideoIndex++;
				if (curVideoIndex == videoArray.length) {
					curVideoIndex = 0;
				}
				md.src = videoArray[curVideoIndex];
				md.play();
			}); */
			/**视频切换结束*/
			
		}
		//商品
		function findSellList() {
			joy
					.getJSON(
							"../../wl/cm/wlCmSellEnAction.dox?action=findSellList",
							{
								sellStateEk : "HAS_SHELVE",
								isThumFlag : "1",
								isIndexEk : "1"
							},
							function(resultObject) {
								var txt = "";
								for ( var i = 0; i < resultObject.length; i++) {
									var ob = resultObject[i];

									if (i % 3 == 0) {
										txt += '<div class="container" style="margin-bottom: 55px;">';
									}
									txt += '<div class="col-sm-4 sellList text-center"  onclick="toProductDetail(\''
											+ resultObject[i].sellId
											+ '\')"><img class="img-responsive" src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='
											+ ob.path + '">';
									txt += '<div class="grid-title">'
											+ ob.productName + '</div>';
									txt += '<div class="grid-desc"><p>'
											+ ob.memo + '</p></div></div>';
									if (i % 3 == 2) {
										txt += '</div>';
									}
								}
								$("#proIntro").append(txt);
							});
		}

		function getLayout() {
			joy.getJSON("../../wl/cm/wlCmInfoEnAction.dox?action=findInfoList", {
				columnId : "0117",
				issueStateEk : "2"
			}, function(resultObject) {
				for ( var i = 0; i < resultObject.length; i++) {
					var layoutTypeEk = resultObject[i].layoutTypeEk;
					if (layoutTypeEk == "NORMAL") {
						normalLayout(resultObject[i].title,
								resultObject[i].content, resultObject[i].path);
					}
					/* else if(layoutTypeEk=="LEFT_RIGHT"){
						leftRightLayout(resultObject[i].title,resultObject[i].content,resultObject[i].path);
					}
					else if(layoutTypeEk=="RIGHT_LEFT"){
						rightLeftLayout(resultObject[i].title,resultObject[i].content,resultObject[i].path);
					} */
				}
			});
		}

		/**
		 * 正常样式
		 * @param title 标题
		 * @param content 内容
		 * @param img 图片
		 */
		function normalLayout(title, content, img) {
			var txt = '';
			txt += '<section><div class="text-center hidden-xs hidden-sm hidden-md"><div class="col-md-8 image-block"><div class="headline"><h2>';
			txt += title + '</h2><br></div><div class="image-text"><p>'
					+ content + '</p></div></div>';
			txt += '<img class="img-responsive backgroundImg" src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='
					+ img + '" alt="Responsive image"></div></section>'
			$("#big_section").append(txt);

			var hiddenTxt = '<section><div class="container hidden-lg"><div class="row"> <div class="col-xs-12"> ';
			hiddenTxt += '<img style="width:100%" src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='
					+ img + '" alt=""><h2>' + title + '</h2></div>';
			hiddenTxt += '<div class="col-xs-12"><p class="mobile-text">'
					+ content + '</p></div></div></div></section>';
			$("#small_section").append(hiddenTxt);
		}
		//跳转到商品详情
		function toProductDetail(sellId) {
			window.location = "productDetail.html?sellId=" + sellId;
		}
	</script>
</body>
</html>
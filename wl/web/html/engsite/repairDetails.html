<!DOCTYPE html>
<html>

	<head lang="en">
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="Generator" content="waterrower Team">
		<meta name="Author" content="waterrowerTeam">
		<meta name="Keywords" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
		<meta name="Description" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
		<script src="../../js/newsite/jquery.min.js"></script>
		<script src="../../js/joy.loader.js" modules="form,dataview,advgrid,layout"></script>
		<script src="../../js/newsite/bootstrap.js"></script>
		<script src="../../js/newsite/getSystemPlatform.js"></script>
		<script src="../../js/engsite/wlcommon.js"></script>
		<script src="../../js/site/getParam.js"></script>
		<script src="../../js/newsite/cnzz.js"></script>
		<link rel="stylesheet" href="../../style/prj/engsite/header.css" />
		<link rel="stylesheet" href="../../style/prj/engsite/footer.css" />
		<link rel="stylesheet" href="../../style/prj/engsite/bootstrap.min.css" />
		<link rel="stylesheet" href="../../style/prj/engsite/wlcommon.css" />
		<link rel="stylesheet" href="../../style/prj/engsite/repairDetails.css" />
		<style type="text/css">
			
			.spanDescription descspan{
				    word-break: normal;
				    width: auto;
				    display: block;
				    white-space: pre-wrap;
				    word-wrap: break-word;
				    overflow: hidden;
			}
		</style>
	</head>

	<body>
		<!-- 头部 -->
	<div id="top">
		<div id="commonpath" style="display: none;" commonpath=""></div>
	</div>
		<!-- 内容 -->
		<div id="wlBody" clss="contentMargin">
			<div class="container" style="margin-top: 100px;margin-bottom: 50px;">
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-8">
						<h3>Repair No.：<span class="joy-label" databind="value:repairNo"></span></h3>
						<table class="table tableOrderDescription">
							<tr>
								<td>Model：<span class="joy-label" databind="value:spec"></span></td>
								<td>Serial No.：<span class="joy-label" databind="value:deviceCd"></span></td>
							</tr>
							<tr>
								<td>SN Status：<span class="joy-label joy-enum"  databind="value:serialVerfEk,source:SERIAL_VERF_EK_ENEnum"></span></td>
								<td>Contact：<span class="joy-label" databind="value:receiver"></span></td>
							</tr>
							<tr>
								<td>Phone：<span class="joy-label" databind="value:mobile"></span></td>
								<td>Order No.：<span class="joy-label joy-enum" databind="value:orderNo"></span></td>
							</tr>
							<tr>
								<td>Problem Module：<span class="joy-label joy-enum"  databind="source:MODULE_EK_ENEnum,value:moduleEk"></span></td>
								<td>Status：<span class="joy-label joy-enum" databind="value:processStatusEk,source:PROCESS_STATUS_EK_ENEnum"></span></td>
							</tr>
							<tr>
								<td colspan="2">Application Time：<span class="joy-label" dataFormat="yyyy-MM-dd  HH:mm:ss" databind="value:applyTime"></span></td>
							</tr>
						</table>
						<!-- <div>
							<ul class="nav navbar-nav utab">
			                    <li class="nli">型号：<span class="joy-label" databind="value:spec"></span></li>
			                    <li class="nli">序列号：<span class="joy-label" databind="value:deviceCd"></span></li>
			                    <li class="nli">验证状态：<span class="joy-label joy-enum"  databind="value:serialVerfEk,source:SERIAL_VERF_EKEnum"></span></li>
			                    <li class="nli">联系人：<span class="joy-label" databind="value:receiver"></span></li>
			                    <li class="nli">联系方式：<span class="joy-label" databind="value:mobile"></span></li>
			                    <li class="nli">订单号：<span class="joy-label joy-enum" databind="value:orderNo"></span></li>
			                    
			                    <li class="nli">问题模块：<span class="joy-label joy-enum"  databind="source:MODULE_EKEnum,value:moduleEk"></span></li>
			                    <li class="nli">处理状态：<span class="joy-label joy-enum" databind="value:processStatusEk,source:PROCESS_STATUS_EKEnum"></span></li>
			                    <li class="nli">申请时间：<span class="joy-label" dataFormat="yyyy-MM-dd  HH:mm:ss" databind="value:applyTime"></span></li>
			                </ul>
		                </div> -->
						<table class="table tableOrderMsg">
							<tr>
								<td colspan="3">Receiver：
									<span class="joy-label" databind="value:receiver"></span>&nbsp;&nbsp;
									<span class="joy-label" databind="value:mobile"></span>&nbsp;&nbsp;
									<span class="joy-label" databind="value:province"></span>
									<span class="joy-label" databind="value:city"></span>
									<span class="joy-label" databind="value:area"></span>
									<span class="joy-label" databind="value:addr"></span>&nbsp;&nbsp;
								</td>
							</tr>
							<tr>
								<td>Order No.：<span class="joy-label" databind="value:orderNo">12345678910</span></td>
								<td>Express：<span class="joy-label joy-enum" databind="value:logisticEk,source:LOGISTIC_EK_ENEnum"></span></td>
							</tr>
							<tr>
								<td>Tracking No.：<span class="joy-label" databind="value:deliveryNo"></span></td>
							</tr>
						</table>
						<div class="divLine"></div>
						<h3>Problem Description</h3>
						<span class="joy-label spanDescription descspan" databind="value:description">111</span>
						<div class="divLine"></div>
						<h3>Image</h3>
						<div class="divPicture clearfix" id="uploadPicturesContent">
							<!-- <img src="../../style/prj/images/waterrower.png" class="img-responsive" alt="Responsive image">
							<img src="../../style/prj/images/waterrower.png" class="img-responsive" alt="Responsive image"> -->
						</div>
						<div class="divLine"></div>
						<h3>Video</h3>
						<div class="divPicture clearfix" id="uploadVideoContent">
							<!-- <img src="../../style/prj/images/waterrower.png" class="img-responsive" alt="Responsive image"> -->
						</div>
						<div class="divLine"></div>
						<h3>Process</h3>
							<div class="spanDescription">
								<span class="spn">Whether to resend the repair part：<span class="joy-label joy-enum" databind="value:isReturnFlag,source:YESORNO_ENEnum" style=""></span></span>
								<span class="spn">Upkeep：￥<span class="joy-label" databind="value:upkeep" style=""></span></span>
								<span>Postage：￥<span class="joy-label" databind="value:freight"></span></span>
							</div>
						<div class="divLine"></div>
						<h3>Process flow</h3>
						<table class="table text-center table-bordered" id="handInfoReplyList">
							<tr>
								<td class="tableTitle">Process Time</td>
								<td class="tableTitle" style="border-left:solid 1px white;">Assignee</td>
								<td class="tableTitle" style="border-left:solid 1px white;">Status</td>
							</tr>
							<!-- <tr>
								<td class="tableContent">2018-05-12</td>
								<td class="tableContent">杰克</td>
								<td class="tableContent">已寄出</td>
							</tr>
							<tr>
								<td class="tableContent">2018-05-12</td>
								<td class="tableContent">杰克</td>
								<td class="tableContent">已寄出</td>
							</tr> -->
						</table>
					</div>
				</div>
			</div>
		</div>
		<div id="ShowImage_Form" class="modal fade bs-example-modal-lg text-center" id="imgModal"tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="z-index: 99999999;">
          <div class="modal-dialog modal-lg" style="display: inline-block; width: auto;">
            <div class="modal-content" id="img_show">
            </div>
          </div>
        </div>
		<!-- 内容结束 -->
		<!--尾部开始-->
		<div id="footerPart">
			
		</div>
		<!--尾部结束-->
		<script>
			//进行初始化出操作
			$(function() {
				initTop();
				initClick();
				initBottom();
				//添加事件
				$(".radio label").click(function() {
					$(this).addClass("selectClass").css("color", "#333");
					$(this).parent().siblings().find("label").removeClass('selectClass').css("color", "#808080");
				});
				//数据初始化
				joy.getJSON("../../wl/es/wlEsCustRepairAction.web?action=init",{enumTypes:['MODULE_EK_EN','SERIAL_VERF_EK_EN','PROCESS_STATUS_EK_EN','LOGISTIC_EK_EN','YESORNO_EN']},function(resultObject){
					console.log(resultObject);
					initObject=resultObject;			
					var viewModel = joy.observable(initObject);    
			        joy.bind($(".joy-smc,.joy-enum"), viewModel);
			        findData();
				});
			});
			//加载数据
			function findData(){
				var repairId=getParam("repairId");
				joy.getJSON("../../wl/es/wlEsCustRepairAction.web?action=getData",{repairId:repairId},function(resultObject){
						var viewModel = joy.observable(resultObject);
						joy.bind($("#wlBody"), viewModel);
						var txt="";
						//图片加载和视频加载
						picList=resultObject.picList;
						$("#uploadPicturesContent").empty();
						for(var i=0;i<picList.length;i++){
						    var ob=picList[i];
						    var imgSrc = "../../wl/cm/wlCmDocumentAction.web?action=downloadFile&id="+ob.path;
							txt+='<img src="' + imgSrc + '" class="img-responsive" alt="Responsive image"/>';
						}
						$("#uploadPicturesContent").append(txt);
						//var lightBox=new myLightBox('uploadPicturesContent',true,'src');
						//视频加载
						videoList=resultObject.videoList;
						for(var i=0;i<videoList.length;i++){
							ob=videoList[i];
							$("#uploadVideoContent").empty();
							joy.getJSON("../../wl/cm/wlCmDocumentAction.web?action=downloadVideoFile",{id:ob.path},function(resultObject){
								resultObject="../../"+resultObject;
								//var txt = '<embed    src="'+resultObject+'" >';
									var txt="";
								   txt+= '<video autoplay="autoplay" controls="controls" width="100%">';
								   txt+= '<source src="'+resultObject+'">';
								   txt+= '</source>';
									txt+= '<object width="100%" >';
									txt+= '<embed width="100%" height="100%" src="'+resultObject+'" />';
									txt+= '</object>';
									txt+= '</video>';
								$("#uploadVideoContent").append(txt);
							});
						}
						
						//回复列表
						sugList=resultObject.sugList;
						$("#handInfoReplyList tr:not(:first)").remove();
						var txt = '';
						for(var i=0;i<sugList.length;i++){
							var ob=sugList[i];
							txt+='<tr >';
							txt+='<td class="tableContent">'+ob.replyTime+'</td>';
							txt+='<td class="tableContent"> '+ob.replyName+' </td>';
							txt+='<td class="tableContent">'+ob.reply+'</td>';
					        txt+='</tr>';
						}
						$("#handInfoReplyList").append(txt);
						
						//显示大图    
					   $("#uploadPicturesContent img").bind("click",function(){
				     		var source = $(this).attr("src");
				     		$("#ShowImage_Form").find("#img_show").html("<image src='"+source+"' class='carousel-inner img-responsive img-rounded' />");
						    $("#ShowImage_Form").modal();
				     	});
				});
				
			}
			
			
		</script>
	</body>

</html>
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="Generator" content="DeepSeaWeb! Team">
<meta name="Author" content="DeepSeaWeb! Team">
<meta name="Keywords"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<meta name="Description"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<title>WaterRower沃特罗伦中国官方网站</title>
<link rel="stylesheet" type="text/css" href="../../style/prj/site/head.css" />
<link rel="stylesheet" type="text/css" href="../../style/prj/site/wlEsMyDeliveryAddr.css" />
<link rel="stylesheet" type="text/css" href="../../style/prj/site/footer.css" />
<link rel="stylesheet" type="text/css" href="../../style/prj/site/zzsc.css" />
<link rel="stylesheet" type="text/css"   href="../../style/prj/site/cnzz.css" />
<script src="../../js/jquery.min.js"></script>
<script src="../../js/site/jquery.cookie.js"></script>
<!--qq-->
<script src="../../js/site/jquery.tipsy.js"></script>
<!--qq-->
<script src="../../js/site/start_v5.js"></script>
<!--qq-->

<script src="../../js/site/shieldingRightClick.js"></script>
<!--屏蔽右键-->
<script src="../../js/joy.loader.js" modules="form,dataview,advgrid,layout"></script>
<script type="text/javascript" src="../../js/site/common.js"></script>
 <script src="../../js/site/jquery.placeholder.min.js"></script>
<!--placeholder-->
<style type="text/css">
:-ms-input-placeholder { /* Internet Explorer 10+ */
color:#gray;
}
input:-ms-input-placeholder, textarea:-ms-input-placeholder {
color:gray;
}
</style>
</head>
<body>
	<div id="floater">
		<img border=0 src="../../style/prj/images/solid.png">
	</div>

	<!-- qq 开始 -->

	<div id="online_qq_layer" show="1">
		<div id="online_qq_tab">
			<div class="online_icon">
				<a title="联系我们" id="floatTrigger" href="javascript:void(0);"></a>
			</div>
		</div>
		<div id="onlineService">
			<div class="online_windows overz">
				<div class="online_w_top"></div>
				<!--online_w_top end-->
				<div class="online_w_c overz">
					<div class="online_bar collapse" id="onlineSort1">
						<h2>
							<a href="javascript:;">在线技术支持</a>
						</h2>
						<div class="online_content overz" id="onlineType1"
							style="display: block;">
							<ul class="overz">
								<li><a 
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"
									target="_blank"><img border="0"
										src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li style="height: 1px;"></li>

							</ul>
						</div>
						<!--online_content end-->
					</div>
				</div>
				<!--online_w_c end-->
				<div class="online_w_bottom"></div>
				<!--online_w_bottom end-->
			</div>
			<!--online_windows end-->
		</div>
	</div>
	<!--qq结束-->

	<!-- 头部-->
	<div class="head">
		<!--头部标题栏开始-->
		<div class="titleContainer">
			<div class="title">
				<div class="time">创始于美国1988</div>
				<div class="land">
					<a href="login.html">会员登录</a>|<a href="register.html">注册</a>
				</div>
			</div>
		</div>
		<!--头部标题栏结束-->
		<!--菜单栏开始-->
		<div class="menu">
			<div class="listContent">
				<ul class="listMenu">
					<li><a href="index.html">
							<div id="headLogo"></div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">沃特罗伦简介</div>
							<div class="bottomTitle">独特的锻炼</div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">家庭锻炼</div>
							<div class="bottomTitle">居家练习</div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">专业训练</div>
							<div class="bottomTitle">商业/专业机构</div> </a>
					</li>
					<li><a href="wlCmSell.html">
							<div class="topTitle">网上商店</div>
							<div class="bottomTitle">设备及训练项目</div> </a>
					</li>
					<li><a href="wlCmCustomerService.html">
							<div class="topTitle">客户服务</div>
							<div class="bottomTitle">服务与技术支持</div> </a>
					</li>
					<li class="menuActive"><a href="wlCmUser.html">
							<div class="topTitle">账号信息</div>
							<div class="bottomTitle">我的账号</div> </a>
					</li>
				</ul>
			</div>
		</div>
		<!--菜单栏结束-->


	</div>
	<!--头部结束-->


	<!--账号信息开始-->
	<div id="receiveAddressBody">
		<div id="accountInfoContainer">
			<div id="accountInfoMenu">
				<div class="accountInfoTitle"></div>
				<div class="MenuContent">
					<div class="item">
						<p class="itemTitle">账户管理</p>
						<a href="wlCmUser.html"><p>-个人信息</p> </a> <a
							href="wlEsMyDeliveryAddr.html"><p style="color: blue;">-收货地址</p>
						</a> <a href="wlCmUpdatePassWord.html">
							<p>-修改密码</p> </a>
					</div>
					<div class="item">
						<p class="itemTitle">我的订单</p>
						 <a href="wlEsMyShoppingCart.html"><p>-购物车</p> </a>
						 <a href="wlEsOrderList.html"><p>-已购买产品</p></a>

					</div>
					<div class="item">
						<p class="itemTitle">我的设备</p>
						<a href="wlEsSerialReg.html">
							<p>-序列号登记</p> </a> <a href="wlEsApply.html"><p>-净水片申请</p> </a> <a
							href="wlEsCustRepair.html">
							<p>-返修管理</p> </a>
					</div>
					<div class="item">
						<p class="itemTitle">客户服务</p>
						<p>-购买咨询</p>
						<p>-意见建议</p>
						<p>-回访活动</p>
					</div>
				</div>
			</div>
			<!--右边边内容开始-->
		 <div id="leftBorder">
				<div id="accountInfoContent"  style="min-height:670px;">
						<div id="receiveAddress">
								<div id="newreceiveAddress">
										<p id="receiveAddressTitle">收货地址</p>
										<form id="receiveAddressForm" class="joy-form" method="post"
											layout="freedom">
											 <table cellspacing=1 cellpadding=1 width="100%" align="center"	border=0>
										     <tbody>
											     <tr height="40px">				        
												     <td width="120px" align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="所在地区" data-role="lang">所在地区</span>：</td>
												     <td><input class="joy-combobox joy-enum" 
													style="width: 93px;" placeholder="请选择"
													databind="source:addPro,value:provinceId" id="dp_pro"
													dataTextField="name" dataValueField="areaId" change="bindCity">
				
												<input class="joy-combobox joy-enum" placeholder="请选择"
													databind="source:addCity,value:cityId" style="width: 93px;"
													id="dp_city" dataTextField="name" dataValueField="areaId"
													change="bindArea"> <input class="joy-combobox joy-enum"
													placeholder="请选择" databind="source:addArea,value:areaId"
													style="width: 93px;" id="dp_area" dataTextField="name"
													dataValueField="areaId"></td>
												 </tr>
												 <tr height="60px">				        
												     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="详细地址" data-role="lang">详细地址</span>：</td>
												     <td><textarea id="addr" class="joy-textarea" required="true" 
													  maxByte="128" 
													placeholder="建议您如实填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息"></textarea></td>
												 </tr>
												 <tr height="50px">				        
												     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="邮政编码" data-role="lang">邮政编码</span>：</td>
												     <td><input id="zipCd" class="joy-textbox" required="true"
													 dataType="postCode" maxByte="6"
													placeholder="如您不清楚邮递区号，请填写000000" /></td>
												 </tr>
												  <tr height="50px">				        
												     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="收货人姓名" data-role="lang">收货人姓名</span>：</td>
												     <td><input id="receiver" class="joy-textbox" maxByte="64" required="true"
													 maxlength="25" placeholder="长度不超过25字符" /></td>
												 </tr>
												 <tr height="50px">				        
												     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="手机号码" data-role="lang">手机号码</span>：</td>
												     <td><input id="mobile" class="joy-textbox" required="true" maxByte="11" minByte="11"
													 placeholder="请输入手机号" /></td>
												 </tr>
												 <tr height="30px">				        
												     <td align="right"><span class="joy-lang" label=""></span></td>
												     <td><input type="checkbox" id="isDefaultFlag" style="width:20px;margin-top:5px;float:left;"/><label for="isDefaultFlag">设置为默认收货地址</label></td>
												 </tr>
											 </tbody>
										 </table>					
				 							<div id="saveReceiveAddress" >
											 <button class="joy-button"  onclick="save" style="background:url('../../style/prj/images/siteSave.png');height: 26px;width: 56px;"></button>
											</div>
										</form>
								</div>
								<div id="receiveAddressList">
									<table class="tbl-main" cellspacing="0" cellpadding="0" border="0">
										<colgroup>
											<col class="col-man">
											<col class="col-area">
											<col class="col-address">
											<col class="col-postcode">
											<col class="col-phone">
											<col class="col-actions">
										</colgroup>
										<tbody id="tbAddress">
											<tr class="thead-tbl-grade">
												<th>收货人</th>
												<th>所在地区</th>
												<th>详细地址</th>
												<th>邮编</th>
												<th>电话/手机</th>
												<th>操作</th>
												<th></th>
											</tr>
											<!--  <tr class="thead-tbl-address">
																		<td>黄保敬</td>
																		<td> 福建省 厦门市 思明区 莲前街道 </td>
																		<td>软件园二期望海路55号A栋705</td>
																		<td>361008</td>
																		<td> 18*******85 </td>
																		<td>
																		<a href="">修改</a>
																		|
																		<a class="del" href="">删除</a>
																		</td>
																		<td class="thead-tbl-status">
																		<div class="note" ></div>
																		</td>
																</tr>
																<tr class="thead-tbl-address">
																		<td>黄保敬</td>
																		<td> 福建省 厦门市 思明区 莲前街道 </td>
																		<td>软件园二期望海路55号A栋705</td>
																		<td>361008</td>
																		<td> 18*******85 </td>
																		<td>
																		<a href="/member/fresh/deliver_address.htm?addrId=5065993580">修改</a>
																		|
																		<a class="del" href="">删除</a>
																		</td>
																		<td class="thead-tbl-status">
																		<a  href="">
																			 <div class="setDefaultAdress"></div>
																		</a>
																		</td>
																</tr> -->
										</tbody>	
									</table>
								</div>
						</div>	
				</div>
			</div>
			<!--右边边内容结束-->
		</div>

	</div>

	<!--账号信息开始-->









	<div class="footer">

		<!--联系我们开始-->
		<div id="contantUs">
			<div id="left">
				<div id="top">联系我们</div>
				<div id="bottom">CONTACT US</div>

			</div>

			<div id="right">
				<div id="top">
					<div class="tel">
						<img width="24" height="25" src="../../style/prj/images/tel.png">
							&nbsp;<span id="tel">电话:0592-5923510 / 5923128</span>
					</div>
					<div class="fax">
						<img width="24" height="25" src="../../style/prj/images/fax.png">
						&nbsp;<span id="fax">传真:0592-5061718</span>
					</div>
					<div class="email">
						<img width="24" height="25" src="../../style/prj/images/email.png">
						&nbsp;<span id="email">邮箱:info@waterrower.com.cn</span>
					</div>
				</div>
				<div id="bottom">
					<img width="24" height="25"
						src="../../style/prj/images/address.png">
						&nbsp;<span id="corpAddr">地址:厦门市塔埔东路166号8层（观音山国际商务运营中心11号楼8层）</span>
				</div>
			</div>
		</div>
		<!--联系我们结束-->
		<div class="footerInfo">
			<div class="footerInfoContainer">
				<div class="footerInfoLeft">
					<img style="width: 269px; height: 32px"
						src="../../style/prj/images/LOGO-269x32.png" />
				</div>
				<div class="footerInfoRight">
					<div>
						<a href="wlCmSecrecyRules.html">保密规则</a>/ <a
							href="wlCmUseOfTerms.html">使用条款</a> / <a href="wlCmMap.html">网站地图</a>
						/<a href="wlCmcontactUs.html"> 关于我们</a> /<a
							href="wlCmSafetyPrecautions.html"> 安全预防措施</a>
					</div>
					<div>
						闽ICP备15007220号-2 | Copyright © 2014-2016 WaterRower.com.cn 版权所有 | 技术支持：<a
							href="http://www.xmguitian.com/" target="_Blank">硅田系统</a>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script> 

		var areaModel = new Object();//初始化区域枚举对象
		var myAddressList = [];
		var editAddress = null;
         var lgc;
		$(document).ready(function() {
			lgc = joy.getCommonLang();
			init();
			otherInit();
			proAreaInit();
			initAddrList();
			$("#dp_pro_title").before('<font class="k-form-required"> *</font>'); 
		});
		function otherInit(){
			$("#online_qq_layer").attr("show", "1");
			//$('input, textarea').placeholder();
			$("#receiveAddressForm p").eq(0).children(".k-form-label").eq(1).remove();
			$("#receiveAddressForm p").eq(0).children(".k-form-label").eq(1).remove();
			$(".item").eq(0).addClass("firstItem");
			$(".item").last().addClass("lastItem");	
		};
		function init() {
			
			$(".setDefaultAdress").css({
				'display' : 'none'
			});
			 
			var accountInfoMenuHeight = $("#accountInfoMenu").outerHeight();
			var accountInfoContentHeight = $("#accountInfoContent").outerHeight();					
			if (accountInfoMenuHeight > accountInfoContentHeight) {
				$("#accountInfoContent").css({
					'height' : accountInfoMenuHeight
				});
			}/* else {
				$("#accountInfoMenu").css({
					'height' : accountInfoContentHeight
				});
			}*/

			//鼠标移过显示设置默认地址
			$(".tbl-main tr").mouseover(
					function() {
						//$(this).children('.setDefaultAdress')
						// alert($(this).children('td').eq(6).children('.setDefaultAdress').html());
						$(this).children('td').eq(6).find('.setDefaultAdress')
								.css("display", "block");

					});
			//鼠标移过隐藏设置默认地址
			$(".tbl-main tr").mouseout(
					function() {
						$(this).children('td').eq(6).find('.setDefaultAdress')
								.css("display", "none");

					});
			
		}

		//初始化省级列表
		function proAreaInit() {
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : ""
				}, function(result) {
					areaModel.addPro = result;
					joy.bind($("#dp_pro"), areaModel);
					$("#dp_city").getJoyComboBox().value("");
				});
		}

		function bindCity() {
			var proV = $("#dp_pro").getJoyComboBox().value();
			if (proV == "") {
				return;
			}
			//获取省下的市数据
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : proV
				}, function(resultObject) {
					areaModel.addCity = resultObject;
					joy.bind($("#dp_city"), areaModel);
					$("#dp_city").getJoyComboBox().value("");
					$("#dp_area").getJoyComboBox().value("");
				});
		}

		//绑定区
		function bindArea() {
			var proV = $("#dp_pro").getJoyComboBox().value();
			var city = $("#dp_city").getJoyComboBox().value();
			if (proV == "" || city == "")
				return;
			//获取市下的区数据
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : city
				}, function(resultObject) {
					areaModel.addArea = resultObject;
					joy.bind($("#dp_area"), areaModel);
					$("#dp_area").getJoyComboBox().value("");
				});
		}

		//保存收货地址
		function save(buttonObject) {
			buttonObject.enable(false); 
			if (!$("#receiveAddressForm").getJoyForm().validate()) {
				joy.showMessage(lgc.validateFaile, "warning");
				buttonObject.enable(true);				
				return ;
			}

			if ($("#dp_pro").getJoyComboBox().value() == "") {
				joy.showMessage("请选择省份！", "warning");
				buttonObject.enable(true);
				return ;
			}

			if ($("#dp_city").getJoyComboBox().value() == "") {
				joy.showMessage("请选择市区！", "warning");
				buttonObject.enable(true);
				return ;
			}

			var dataPost = {};
			dataPost.addr = $("#addr").val();
			dataPost.zipCd = $("#zipCd").val();
			dataPost.receiver = $("#receiver").val();
			dataPost.mobile = $("#mobile").val();
			if (editAddress != null) {
				dataPost.deliveryAddrId = editAddress.deliveryAddrId;
				dataPost.createTime = editAddress.createTime;
				dataPost.creator = editAddress.creator;
			}
			dataPost.provinceId = $("#dp_pro").getJoyComboBox().value();
			dataPost.province = $("#dp_pro").getJoyComboBox().text();
			dataPost.cityId = $("#dp_city").getJoyComboBox().value();
			dataPost.city = $("#dp_city").getJoyComboBox().text();
			dataPost.areaId = $("#dp_area").getJoyComboBox().value();
			dataPost.area = $("#dp_area").getJoyComboBox().text();
			dataPost.isDefaultFlag = 0;
			
			if ($("#isDefaultFlag").is(':checked')) {
				dataPost.isDefaultFlag = 1;
			}

			joy.postJSON(
				"../../wl/es/wlEsMyDeliveryAddrAction.web?action=saveData",
				dataPost, function(resultObject) {
					joy.showMessage("操作成功！", "success");
					buttonObject.enable(true);				
					//刷新收货地址列表
					initAddrList();
					clearForm();
				});
		}

		//显示收货地址列表
		function initAddrList() {
			var txt = $("#tbAddress tr:first").prop('outerHTML');
               $("#accountInfoContent").attr("style","min-height:670px;");
			joy.postJSON(
				"../../wl/es/wlEsMyDeliveryAddrAction.web?action=getMyDeliveryAddrList",
				{},
				function(resultObject) {
					$("#tbAddress").empty();
					
					//刷新收货地址列表
					for ( var i = 0; i < resultObject.length; i++) {
						myAddressList = resultObject;
	
						txt += '<tr class="thead-tbl-address">';
						txt += '<td> ' + resultObject[i].receiver+ ' </td>';
						txt += '<td>' + resultObject[i].province+ resultObject[i].city+ resultObject[i].area + '</td>';
						txt += '<td> ' + resultObject[i].addr+ ' </td>';
						txt += '<td>' + resultObject[i].zipCd+ ' </td>';
						txt += '<td> ' + resultObject[i].mobile+ ' </td>';
						txt += '<td>';
						txt += '<a onclick="updateAddr(\''+ resultObject[i].deliveryAddrId+ '\')">修改</a>';
						txt += '|';
						txt += '<a class="del" onclick="delAddr(\''+ resultObject[i].deliveryAddrId+ '\')">删除</a>';
						txt += '</td>	';
						txt += '<td class="thead-tbl-status">';
	
						if (resultObject[i].isDefaultFlag == "1") {
							txt += '<div class="note" ></div>';
						} else {
							txt += '<a onclick="setAsDefalut(\''+ resultObject[i].deliveryAddrId+ '\')">';
							txt += '<div class="setDefaultAdress"></div>';
							txt += '</a>';
						}
	
						txt += '</td>';
						txt += '</tr>';
					}
	
					$("#tbAddress").append(txt);
					init();
				});
		}

		//修改收货地址
		function updateAddr(addrId) {
			var deliveryAddr = null;

			for ( var i = 0; i < myAddressList.length; i++) {
				if (myAddressList[i].deliveryAddrId == addrId) {
					deliveryAddr = myAddressList[i];
					editAddress = deliveryAddr;
				}
			}

			if (deliveryAddr != null) {
				$("#addr").val(deliveryAddr.addr);
				$("#zipCd").val(deliveryAddr.zipCd);
				$("#receiver").val(deliveryAddr.receiver);
				$("#mobile").val(deliveryAddr.mobile);

				$("#dp_pro").getJoyComboBox().value(deliveryAddr.provinceId);

				joy.getJSON(
					"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
					{
						parentId : deliveryAddr.provinceId
					}, function(resultObject) {
						areaModel.addCity = resultObject;
						joy.bind($("#dp_city"), areaModel);
						$("#dp_city").getJoyComboBox().value(
								deliveryAddr.cityId);
					});

				joy.getJSON(
					"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
					{
						parentId : deliveryAddr.cityId
					}, function(resultObject) {
						areaModel.addArea = resultObject;
						joy.bind($("#dp_area"), areaModel);
						$("#dp_area").getJoyComboBox().value(
								deliveryAddr.areaId);
					});

				if (deliveryAddr.isDefaultFlag == "1") {
					$("#isDefaultFlag").prop('checked', true);
					$("#isDefaultFlag").attr("disabled", true);
				} else {
					$("#isDefaultFlag").prop('checked', false);
				}
			}
		}

		//删除收货地址
		function delAddr(addrId) {
			  joy.showMessageDialog("确定要删除该收货地址吗？", "ok,cancel", function(e) {
					if (e.btnName == "ok") {	
						joy.getJSON(
							"../../wl/es/wlEsMyDeliveryAddrAction.web?action=delMyDeliveryAddr",
							{
								deliveryAddrId : addrId
							}, function(resultObject) {
								joy.showMessage("删除成功", "success");
								initAddrList();
							});
					}
				});
					
		}

		//设置为默认收货地址
		function setAsDefalut(addrId) {
			joy.getJSON(
				"../../wl/es/wlEsMyDeliveryAddrAction.web?action=setAsDefaultAddr",
				{
					deliveryAddrId : addrId
				}, function(resultObject) {
					joy.showMessage("设置成功", "success");
					initAddrList();
				});
		}

		/*function validateForm() {
			if (!$("#receiveAddressForm").getJoyForm().validate()) {
				joy.showMessage(lgc.validateFaile, "warning");				
				return false;
			}

			if ($("#dp_pro").getJoyComboBox().value() == "") {
				joy.showMessage("请选择省份！", "warning");
				return false;
			}

			if ($("#dp_city").getJoyComboBox().value() == "") {
				joy.showMessage("请选择市区！", "warning");
				return false;
			}

			return true;
		}*/

		function clearForm() {
			editAddress = null;
			$("#addr").val("");
			$("#zipCd").val("");
			$("#receiver").val("");
			$("#mobile").val("");

			$("#dp_pro").getJoyComboBox().value("");
			$("#dp_city").getJoyComboBox().value("");
			$("#dp_area").getJoyComboBox().value("");

			$("#isDefaultFlag").prop('checked', false);
			$("#isDefaultFlag").attr("disabled", false);
		}
	</script>
	<script type="text/javascript" src="../../js/site/cnzz.js"></script>
</body>
</html>

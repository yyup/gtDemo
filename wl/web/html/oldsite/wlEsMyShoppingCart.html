<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="DeepSeaWeb! Team">
  <meta name="Author" content="DeepSeaWeb! Team">
  <meta name="Keywords" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
  <meta name="Description" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
  <title>WaterRower沃特罗伦中国官方网站</title>
  <link rel="stylesheet" type="text/css"   href="../../style/prj/site/head.css" />
    <link rel="stylesheet" type="text/css"   href="../../style/prj/site/wlEsMyShoppingCart.css" />
     <link rel="stylesheet" type="text/css"   href="../../style/prj/site/footer.css" />
	<link rel="stylesheet" type="text/css"   href="../../style/prj/site/zzsc.css" />
	<link rel="stylesheet" type="text/css"   href="../../style/prj/site/cnzz.css" />
    <script src="../../js/jquery.min.js"></script>
         <script src="../../js/joy.loader.js" modules="form,dataview,advgrid,layout"></script>
    <script src="../../js/site/jquery.cookie.js"></script><!--qq-->
    <script src="../../js/site/jquery.tipsy.js"></script><!--qq-->
    <script src="../../js/site/start_v5.js"></script><!--qq-->
      <script src="../../js/site/shieldingRightClick.js"></script><!--屏蔽右键-->
     <script type="text/javascript" src="../../js/site/common.js"></script>
 </head>
 <body>
      <div id="floater" ><img border=0 src="../../style/prj/images/solid.png" ></div>

	<!-- qq 开始 -->

	<div id="online_qq_layer" show="1">
		<div id="online_qq_tab">
			<div class="online_icon">
				<a title="联系我们" id="floatTrigger" href="javascript:void(0);"></a>
			</div>
		</div>
		<div id="onlineService">
			<div class="online_windows overz">
				<div class="online_w_top"></div>
				<!--online_w_top end-->
				<div class="online_w_c overz">
					<div class="online_bar collapse" id="onlineSort1">
						<h2>
							<a href="javascript:;">在线技术支持</a>
						</h2>
						<div class="online_content overz" id="onlineType1"
							style="display: block;">
							<ul class="overz">
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" /> </a></li>
								<li style="height: 1px;"></li>

							</ul>
						</div>
						<!--online_content end-->
					</div>
				</div>
				<!--online_w_c end-->
				<div class="online_w_bottom"></div>
				<!--online_w_bottom end-->
			</div>
			<!--online_windows end-->
		</div>
	</div>
	<!--qq结束-->

	<!-- 头部-->
	<div class="head">
		<!--头部标题栏开始-->
		<div class="titleContainer">
			<div class="title">
				<div class="time">创始于美国1988</div>
				<div class="land">
					<a href="login.html">会员登录</a>|<a href="register.html">注册</a>
				</div>
			</div>
		</div>
		<!--头部标题栏结束-->
		<!--菜单栏开始-->
		<div class="menu">
			<div class="listContent">
				<ul class="listMenu">
					<li><a href="首页.html">
							<div id="headLogo"></div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">沃特罗伦简介</div>
							<div class="bottomTitle">独特的锻炼</div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">家庭锻炼</div>
							<div class="bottomTitle">居家练习</div> </a>
					</li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">专业训练</div>
							<div class="bottomTitle">商业/专业机构</div> </a>
					</li>
					<li class="menuActive"><a href="wlCmSell.html">
							<div class="topTitle">网上商店</div>
							<div class="bottomTitle">设备及训练项目</div> </a>
					</li>
					<li><a href="wlCmCustomerService.html">
							<div class="topTitle">客户服务</div>
							<div class="bottomTitle">服务与技术支持</div> </a>
					</li>
					<li><a href="wlCmUser.html">
							<div class="topTitle">账号信息</div>
							<div class="bottomTitle">我的账号</div> </a>
					</li>
				</ul>
			</div>
		</div>
		<!--菜单栏结束-->


	</div>
	<!--头部结束-->



<!--账号信息开始-->
	 <div  id="personCarBody">
			<div  id="personCarContainer">
					<div id="personCarMenu" >
                          <div class="personCarTitle"></div>
						  <div class="MenuContent">
						         <div class="item">
							         <p class="itemTitle">账户管理</p>
							          <a href="wlCmUser.html"><p >-个人信息</p></a>
									  <a href="wlEsMyDeliveryAddr.html"><p>-收货地址</p></a>
									 <a href="wlCmUpdatePassWord.html"> <p>-修改密码</p></a>
							   </div>
						        <div class="item">
							         <p class="itemTitle">我的订单</p>
							          <a href="wlEsMyShoppingCart.html"><p  style="color:blue;">-购物车</p></a>
								  <a href="wlEsOrderList.html"><p >-已购买产品</p></a>
								
							   </div>
							    <div class="item">
							           <p class="itemTitle">我的设备</p>
							          <a href="wlEsSerialReg.html"> <p>-序列号登记</p></a>
									   <a href="wlEsApply.html"><p>-净水片申请</p></a>
									  <a href="wlEsCustRepair.html"> <p>-返修管理</p></a>
							   </div>
							    <div class="item">
							         <p class="itemTitle">客户服务</p>
							            <p>-购买咨询</p>
									    <p>-意见建议</p>
									   <p>-回访活动</p>
							   </div>
						  </div>
					</div>
					<!-- 右边内容开始 -->
					<div id="leftBorder">					
							<div  id="personCarContent" style="min-height: 670px;">
			                           <div id="personCarList">
											     <div class="carHead">
														<ul id="carHeadList">
																<li > 
																	<input type="checkbox" value="402881814b493924014b4941c2c30005" class="head-checkbox" >
																</li>
																<li>商品信息</li>
																<li>单价</li>
																<li>数量</li>
																<li>金额</li>
																<li>操作</li>
													   </ul>
												  </div>
				                                   <div class="carBodyList">
				                                          <ul id="carList">
				                                           		<!--
														        <li>
																	<div class="carItem">
																		<input type="checkbox" value="402881814b493924014b4941c2c30005" class="body-checkbox">
																	</div>												
																
																	<div class="carItem">
																			<div  class="carImg">
																				<img src="../../style/prj/tempImages/product.jpg" />
																			 </div>
																			  <div class="carProductName">
																					<div class="carProductNameContent">
																				沃特罗伦(waterRower)自然系列"俱乐部"款划船器沃特罗伦
																				</div>		
																			 </div>																 
																	</div>
																	 <div class="carItem">
																		<div class="verticalCenter">
																			 12999.00
																		</div>
																	</div>
																	<div class="carItem">
																		<span class="carProductNumValue">
																			 <div class="carReduce" onclick="reduceNum($(this))" >-</div>
																			  <input  type="text" class="carNumber"  value="1"  
																					 />
																			   <div class="carAdd" onclick="addNum($(this))">+</div>	  
																		 </span>								 		 
																	</div>
																	<div class="carItem">
																		<div class="verticalCenter">
																			 12999.00
																		</div>
																	</div>
																	 <div class="carItem">
																		<div class="verticalCenter">
																				删除
																		 </div>
																	 </div>
																</li>  -->									
														  </ul>
												   </div>
												   <div class="carFooter">
													   <ul id="carFooterList">
														 <li>
														 <span  id="goShopping"><a href="wlCmSell.html">继续购物</a> </span>
														  <span id="total"> 合计:&nbsp;&nbsp;0.00</span>
														 </li>
														 <li><a style="text-decoration:none;color:#fff;" onclick="settleMent()" >结&nbsp;&nbsp;算</a></li>
													   </ul>
											       </div>                           
							            </div>
					      </div>
			     </div>
              <!-- 右边内容介绍 -->
		    </div>
		</div>

<!--账号信息开始-->











	<div class="footer">

		<!--联系我们开始-->
		<div id="contantUs">
			<div id="left">
				<div id="top">联系我们</div>
				<div id="bottom">CONTACT US</div>

			</div>

			<div id="right">
				<div id="top">
					<div class="tel">
						<img width="24" height="25" src="../../style/prj/images/tel.png">
						&nbsp;<span id="tel">电话:0592-5923510 / 5923128</span>
					</div>
					<div class="fax">
						<img width="24" height="25" src="../../style/prj/images/fax.png">
						&nbsp;<span id="fax">传真:0592-5061718</span>
					</div>
					<div class="email">
						<img width="24" height="25" src="../../style/prj/images/email.png">
						&nbsp;<span id="email">邮箱:info@waterrower.com.cn</span>
					</div>
				</div>
				<div id="bottom">
					<img width="24" height="25"
						src="../../style/prj/images/address.png">
						&nbsp;<span id="corpAddr">地址:厦门市塔埔东路166号8层（观音山国际商务运营中心11号楼8层）</span>
				</div>
			</div>
		</div>
		<!--联系我们结束-->
		<div class="footerInfo">
			<div class="footerInfoContainer">
				<div class="footerInfoLeft">
					<img style="width: 269px; height: 32px"
						src="../../style/prj/images/LOGO-269x32.png" />
				</div>
				<div class="footerInfoRight">
					<div>
						<a href="wlCmSecrecyRules.html">保密规则</a>/ <a
							href="wlCmUseOfTerms.html">使用条款</a> / <a href="wlCmMap.html">网站地图</a>
						/<a href="wlCmcontactUs.html"> 关于我们</a> /<a
							href="wlCmSafetyPrecautions.html"> 安全预防措施</a>
					</div>
					<div>
						闽ICP备15007220号-2 | Copyright © 2014-2016 WaterRower.com.cn 版权所有 | 技术支持：<a
							href="http://www.xmguitian.com/" target="_Blank">硅田系统</a>
					</div>

				</div>
			</div>
		</div>
	</div>



   <script> 



  $(function(){
            	   $("#online_qq_layer").attr("show","1");
				   $(".item").eq(0).addClass("firstItem");
				     $(".item").last().addClass("lastItem");
					$("#carHeadList li").eq(0).addClass("firstCarItem");
					$("#carHeadList li").eq(1).addClass("secondCarItem");
					$("#carHeadList li").eq(3).addClass("fourCarItem");
					$("#carHeadList li").last().addClass("lastCarItem");
					$("#carFooterList li").eq(0).addClass("firstLi");
					$("#carFooterList li").eq(1).addClass("secondLi");
					getMyShopCarList();					
					initHeight();
		});	

  function getMyShopCarList(){
	  
	  var txt="";
	    $("#personCarContent").attr("style","min-height: 670px;");
		  joy.getJSON("../../wl/es/wlEsMyShoppingCartAction.web?action=findMyShoppingCartPage",{pageSize:100,currPage:1,isThumFlag:"1"},function(resultObject){
			   
			  
			  for(var i=0;i<resultObject.items.length;i++){
				   ob=resultObject.items[i];
				  txt+='<li>';
				  txt+='<div class="carItem">';
				   if(ob.sellStateEk=='NO_SHELVE'){
					   txt+='<img  src="../../style/prj/images/disable.png">';
				   }else{
						  txt+='<input type="checkbox" value="'+ob.sellId+'" class="body-checkbox">';
				  }
				  txt+='</div>';												
				  txt+='<div class="carItem">';
				  txt+='<div  class="carImg">';
				  txt+='<img src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path+'"/>';
				  txt+='</div>';
				  txt+='<div class="carProductName">';
				  txt+='<div class="carProductNameContent">';
				  txt+=ob.productName;
				  txt+='</div>';		
				  txt+= '</div>';																 
				  txt+='</div>';
				  txt+='<div class="carItem">';
				  txt+='<div class="verticalCenter">';
				  txt+=ob.price;
				  txt+='</div>';
				  txt+='</div>';
				  txt+='<div class="carItem">';
				  txt+='<span class="carProductNumValue">';
				  txt+='<div class="carReduce" onclick="reduceNum($(this))" >-</div>';
				  txt+='<input  type="text" maxlength="6" class="carNumber"  value="'+ob.num+'"/>';
									
				  txt+='<div class="carAdd" onclick="addNum($(this))">+</div>';	  
				  txt+='</span>';		
					if(ob.inventoryState=="1"){
  							txt+=' <span class="sellWarning">暂无现货</span>';	
						}else if(ob.inventoryState=="2"){
  							txt+=' <span class="sellWarning">库存紧张</span>';	
						}
				  txt+='</div>';
				  txt+='<div class="carItem">';
				  txt+='<div class="verticalCenter">';
				  txt+=ob.amt;
				  txt+='</div>';
				  txt+='</div>';
				  txt+='<div class="carItem">';
				  txt+='<div class="verticalCenter">';
				  txt+='<span style="cursor:pointer" onclick="delGoods($(this),\''+ob.shoppingCartId+'\')">删除</span>';
				  txt+= '</div>';
				  txt+='</div>';
				  txt+='</li>';
			   }
			  
			     $("#carList").empty();
			     $("#carList").append(txt);
				   $(".carFooter").show(); 
				   initGoodsListParameter();
				   triggerChangePrice();
				   initHeight();
		  });        	   
	 
  }
  //重新计算内容的高度
  function initHeight(){
 	   var personCarMenuHeight=$("#personCarMenu").outerHeight();
 		  var personCarContentHeight=$("#personCarContent").outerHeight();		
 		   if(personCarMenuHeight>personCarContentHeight){
 	              $("#personCarContent").css({'height':personCarMenuHeight});
 		   }/*else{
 	          $("#personCarMenu").css({'height':personCarContentHeight});
 		   }*/	   
  }
//
function initGoodsListParameter(){

	$("#carList li").each(function(){
			$(this).children(".carItem").eq(0).addClass("firstCarItem");
			$(this).children(".carItem").eq(1).addClass("secondCarItem");
			$(this).children(".carItem").eq(3).addClass("fourCarItem");
			$(this).children(".carItem").last().addClass("lastCarItem");
	});

    $(".carNumber").keyup(function(){    
	         var temp=$(this).val();
          if(temp.match(/[^0-9]+/gi)||temp=='0'||temp==''){
				 //numValue=$.trim(numValue.replace(/[^0-9]+/gi,''));
				 // $(this).val(numValue);
         	 $(this).val("1");
			 }
   // $(this).val($(this).val().replace(/[^0-9.]+/gi,''));  
     }).bind("paste",function(){  //CTR+V事件处理    
				var temp=$(this).val();
          if(temp.match(/[^0-9]+/gi)||temp=='0'||temp==''){
					  //numValue=$.trim(numValue.replace(/[^0-9]+/gi,''));
					  //$(this).val(numValue);
         	   $(this).val("1");
				 }               
			 }).css("ime-mode", "disabled"); //CSS设置输入法不可用 


     $("[type=checkbox]").prop("checked",true);//默认全部选中商品
		 traversingGoods();//默认全部选中的商品合计
		//当全选单击
    $("[class=head-checkbox]").click(function(){                
			$('[type=checkbox]').prop("checked",this.checked); 
			  if(this.checked){
					traversingGoods();
			  }else{
				  $("#total").html(" 合计:&nbsp;&nbsp;0.00");

			  }
     
	   });
	// 当商品复选框被单击
	$("[class=body-checkbox]").click(function(){
			 var price=parseFloat($(this).parents(".carItem").siblings(".carItem").eq(3).children().html());
			 var totalPrice=parseFloat($.trim($("#total").html().replace(/[^0-9.]+/gi,'')));//获取商品总价
		   //当商品选中，商品金额加到合计，否则，从合计中扣除商品金额
		  
			if($(this).is(':checked')){
				  totalPrice=(totalPrice+price).toFixed(2);
				 $("#total").html(" 合计:&nbsp;&nbsp;"+totalPrice);

			}else{
				totalPrice=(totalPrice-price).toFixed(2);
				$("#total").html(" 合计:&nbsp;&nbsp;"+totalPrice);

			}
			
			//商品个数
			 var totalCheckBox=parseInt($("[class=body-checkbox]").size());
			  if($("[class=body-checkbox]:checked").size()===totalCheckBox){
				  $("[class=head-checkbox]").prop("checked","checked"); 
			  }else{
				   $("[class=head-checkbox]").prop("checked",false);
			  }
	});
}



    var numValue=1;
	function reduceNum(obj){
		 priceValue=parseInt(obj.next().val());
		 priceValue=--priceValue;
		 if(priceValue===1){
		 obj.attr("style","color:#A5A5A5");
		 obj.next().val(priceValue);
		  numValue=priceValue+1;
			 changeTotalPrice(obj,priceValue+"");
		 }
		 else if(priceValue>1){
			 obj.attr("style","color:#303030");
			 obj.next().val(priceValue);
			 //numValue=priceValue+1;
			 changeTotalPrice(obj,priceValue+"");

		  }
    }
	function addNum(obj){
	    priceValue=parseInt(obj.prev().val());
		priceValue=++priceValue;
		if(priceValue>1){
	   		 obj.prev().prev().attr("style","color:#303030");
		}
	 		 obj.prev().val(priceValue);
	   //numValue=priceValue-1;
         changeTotalPrice(obj,priceValue+"");
  }
  function changeTotalPrice(obj,num){
        if(!num.match(/[^0-9]+/gi)||num!=='0'||num!==''){        
				 var price= parseFloat(obj.parents(".carItem").prev().children().html());
				  var thisTotalPrice=10000*price*num/10000;
				     if(!isNaN(thisTotalPrice)){
				        obj.parents(".carItem").next().children().html(thisTotalPrice);
						}
				     traversingGoods();
					/* var checked=obj.parents(".carItem").siblings(".carItem").eq(0).children("input").is(':checked');
					if(checked){
					   var totalPrice=$("#carFooterList").children().eq(0).html();//获取商品总价
					   //totalPrice=totalPrice.replace(/[^a-z0-9]+/gi,'');
						totalPrice=parseFloat($.trim(totalPrice.replace(/[^0-9.]+/gi,'')));
						var temp=10000*price*(num-numValue)/10000;//获取增加或减少的价格
						totalPrice=(totalPrice+temp).toFixed(2);
					   if(!isNaN(totalPrice)){
						$("#carFooterList").children().eq(0).html(" 合计:&nbsp;&nbsp;"+totalPrice);
					   }
				   } */
	  }
  
  }
   
   //当前获得焦点的文本框的数字
/*$(".carNumber").mouseenter(function(){
	                         
                           temp=$(this).val();
	                     if(!temp.match(/[^0-9]+/gi)||temp!=='0'||temp!==''){
							   numValue=$.trim($(this).val().replace(/[^0-9]+/gi,''));
						 }
});
   */
 
   function triggerChangePrice(){

		  //当前获得焦点的文本框的数字
		  $(".carNumber").mouseleave(function(){
			  var curValue=$(this).val();
			  $(this).val(curValue);
			  changeTotalPrice($(this),curValue);
		  
		  });
		  $("#carList li").hover(function(){
				 traversingGoods();
			   });
   }

	   //遍历所有商品,计算合计
	function traversingGoods(){
	       var totalPrice=0;
		       $("[class=body-checkbox]").each(function(){
		    	   var checked=$(this).is(':checked');
		    	   if(checked){
				   // var price=parseFloat($(this).parents(".carItem").siblings(".carItem").eq(3).children().html());
						var price=parseFloat( $(this).parents(".carItem").siblings(".carItem").eq(1).children().html());
						var carNum=parseInt($(this).parents(".carItem").siblings(".carItem").eq(2).children(".carProductNumValue").children(".carNumber").val());
					  price=(10000*price)*carNum/10000;
					   if(price!==""){					  
					     $(this).parents(".carItem").siblings(".carItem").eq(3).children().html(price)
					   }
				   	  totalPrice=totalPrice+price;
		    	   }
				});
		$("#total").html(" 合计:&nbsp;&nbsp;"+totalPrice.toFixed(2));
	
	}
  function delGoods(obj,shoppingCartId){	  	 
	  joy.showMessageDialog("确定要删除该商品吗?", "ok,cancel", function(e) {
			if (e.btnName == "ok") {
				   $("#personCarContent").attr("style","min-height: 670px;");
					  joy.getJSON("../../wl/es/wlEsMyShoppingCartAction.web?action=delCarGoods",{shoppingCartId:shoppingCartId},function(resultObject){		    
						  obj.parent().parent().parent().remove();
							//商品个数
							 var totalCheckBox=parseInt($("[class=body-checkbox]").size());
							  if($("[class=body-checkbox]:checked").size()===totalCheckBox){
								  $("[class=head-checkbox]").prop("checked","checked"); 
							  }else{
								   $("[class=head-checkbox]").prop("checked",false);
							  }
						    traversingGoods();
						    initHeight();
					 });
			}
		});
  }
  //结算
  function settleMent(){
	  var sellIds=new Array();
	  var nums=new Array();
	  var goodsCount=-1;
	  var i=0;
	  $("[class=body-checkbox]").each(function(index){
		  var checked=$(this).is(':checked');
	   	   if(checked){
	   		 sellId=$(this).val();
			 var carNum=$(this).parents(".carItem").siblings(".carItem").eq(2).children(".carProductNumValue").children(".carNumber").val();
			 goodsCount=index;
			
			 sellIds[i]=sellId;
			  nums[i]= carNum;
			   i++;
	   	   }
	  });
	  
	  if(goodsCount>=0){
		  joy.getJSON("../../wl/es/wlEsMyShoppingCartAction.web?action=setOrGetShopSellId",{sellIds:sellIds,nums:nums,isSet:"set"},function(resultObject){			  
			  window.location="wlEsConfirmOrder.html?source=myCar";
		  });
		 
	  }else{
			joy.showMessage("您当前没有勾选商品，请先选择!", "warning");

	  }
	  
  }
   </script>
  <script type="text/javascript" src="../../js/site/cnzz.js"></script>
 </body>
</html>

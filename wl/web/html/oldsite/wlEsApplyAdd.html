<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="Generator" content="DeepSeaWeb! Team">
<meta name="Author" content="DeepSeaWeb! Team">
<meta name="Keywords"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<meta name="Description"
	content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
<title>WaterRower沃特罗伦中国官方网站</title>
<link rel="stylesheet" type="text/css"
	href="../../style/prj/site/head.css" />
<link rel="stylesheet" type="text/css"
	href="../../style/prj/site/wlEsApplyAdd.css" />
<link rel="stylesheet" type="text/css"
	href="../../style/prj/site/footer.css" />
<link rel="stylesheet" type="text/css"
	href="../../style/prj/site/zzsc.css" />
	<link rel="stylesheet" type="text/css"   href="../../style/prj/site/cnzz.css" />
<script src="../../js/jquery.min.js"></script>
<script src="../../js/site/jquery.cookie.js"></script>
<!--qq-->
<script src="../../js/site/jquery.tipsy.js"></script>
<!--qq-->
<script src="../../js/site/start_v5.js"></script>
<!--qq-->
<script src="../../js/site/jquery.placeholder.min.js"></script>
<!--placeholder-->
<script src="../../js/site/shieldingRightClick.js"></script>
<!--屏蔽右键-->
  <script src="../../js/joy.loader.js" modules="form,dataview,advgrid,layout"></script>
<script type="text/javascript" src="../../js/site/common.js"></script>


</head>
<body>
	<div id="floater">
		<img border=0 src="../../style/prj/images/solid.png">
	</div>

	<!-- qq 开始 -->

	<div id="online_qq_layer" show="1">
		<div id="online_qq_tab">
			<div class="online_icon">
				<a title="联系我们" id="floatTrigger" href="javascript:void(0);"></a>
			</div>
		</div>
		<div id="onlineService">
			<div class="online_windows overz">
				<div class="online_w_top"></div>
				<!--online_w_top end-->
				<div class="online_w_c overz">
					<div class="online_bar collapse" id="onlineSort1">
						<h2>
							<a href="javascript:;">在线技术支持</a>
						</h2>
						<div class="online_content overz" id="onlineType1"
							style="display: block;">
							<ul class="overz">
								<li><a a
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"
									target="_blank"><img border="0"
										src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" />
								</a>
								</li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" />
								</a>
								</li>
								<li><a target="_blank"
									href="http://wpa.qq.com/msgrd?v=3&uin=496809153&site=qq&menu=yes"><img
										border="0" src="../../style/prj/images/qq.jpg" alt="我们竭诚为您服务！"
										title="我们竭诚为您服务！" />
								</a>
								</li>
								<li style="height: 1px;"></li>

							</ul>
						</div>
						<!--online_content end-->
					</div>
				</div>
				<!--online_w_c end-->
				<div class="online_w_bottom"></div>
				<!--online_w_bottom end-->
			</div>
			<!--online_windows end-->
		</div>
	</div>
	<!--qq结束-->

	<!-- 头部-->
	<div class="head">
		<!--头部标题栏开始-->
		<div class="titleContainer">
			<div class="title">
				<div class="time">创始于美国1988</div>
				<div class="land">
					<a href="login.html">会员登录</a>|<a href="register.html">注册</a>
				</div>
			</div>
		</div>
		<!--头部标题栏结束-->
		<!--菜单栏开始-->
		<div class="menu">
			<div class="listContent">
				<ul class="listMenu">
					<li><a href="首页.html">
							<div id="headLogo"></div>
					</a></li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">沃特罗伦简介</div>
							<div class="bottomTitle">独特的锻炼</div> </a></li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">家庭锻炼</div>
							<div class="bottomTitle">居家练习</div> </a></li>
					<li><a href="wlCmInfo.html">
							<div class="topTitle">专业训练</div>
							<div class="bottomTitle">商业/专业机构</div> </a></li>
					<li><a href="wlCmSell.html">
							<div class="topTitle">网上商店</div>
							<div class="bottomTitle">设备及训练项目</div> </a></li>
					<li><a href="wlCmCustomerService.html">
							<div class="topTitle">客户服务</div>
							<div class="bottomTitle">服务与技术支持</div> </a></li>
					<li class="menuActive"><a href="wlCmUser.html">
							<div class="topTitle">账号信息</div>
							<div class="bottomTitle">我的账号</div> </a></li>
				</ul>
			</div>
		</div>
		<!--菜单栏结束-->


	</div>
	<!--头部结束-->


	<!--账号信息开始-->
	<div id="applyAddBody">
		<div id="accountInfoContainer">
			<div id="applyContent">
				<div id="apply">
					<span id="read">净水片申请</span>(保修期内可免费提供净水片，用户需自行支付运费<span id="postAge"></span>元)
					<form id="applyForm" class="joy-form" method="post" layout="freedom">
						<table cellspacing=1 cellpadding=1 width="100%" align="center"	border=0>
							   <tbody>
								     <tr height="40px">				        
									     <td width="120px" align="right"><span class="joy-lang" label="用户账号" data-role="lang">用户账号</span>：</td>
									     <td><span id="personAccount" class="joy-label" 
									     databind="value:account"></span></td>
									 </tr>
									 <tr height="40px">				        
									     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="序列号" data-role="lang">序列号</span>：</td>
									     <td>	<input class="joy-combobox joy-enum" placeholder="请选择"
												required="true" id="deviceCd" dataTextField="deviceCd" 
												dataValueField="deviceCd"
												databind="value:deviceCd,source:deviceCd_Enum"
												style="width: 280px;" /></td>
									 </tr>
									  <tr height="40px">				        
									     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="配件" data-role="lang">配件</span>：</td>
									     <td><input class="joy-combobox joy-enum"  placeholder="请选择"
											required="true" id="machineType"
											databind="value:machineTypeEk,source:MACHINE_TYPE_EKEnum"
											style="width: 280px;" /></td>
										</tr>
										 <tr height="40px">				        
										     <td align="right" style="width:122px;"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="邮费支付方式" data-role="lang">邮费支付方式</span>：</td>
										     <td><input class="joy-combobox joy-enum"   placeholder="请选择"
												required="true" id="payMode"
												databind="value:payModeEk,source:PAY_MODE_EKEnum"
												style="width: 280px;" /></td>
										</tr>
										 <tr height="40px">				        
										     <td align="right"><span class="joy-lang" ></span></td>
										     <td><input type="checkbox" 
						                         	id="isDefalutAccount" style="width: 20px;" /><label for="isDefalutAccount">默认账户收件方式</label> </td>
										</tr>
										 <tr height="40px">				        
										     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="收货人" data-role="lang">收货人</span>：</td>
										     <td><input id="receiver" class="joy-textbox" 
													placeholder="请输入收货人" required="true" maxByte="64"
													databind="value:receiver" />
											</td>
										</tr>
										<tr height="40px">				        
										     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="手机号码" data-role="lang">手机号码</span>：</td>
										     <td><input id="mobile" class="joy-textbox" 
													placeholder="请输入手机号码" required="true" maxByte="30"
													dataType="mobileTel" databind="value:mobile"  />
											</td>
										</tr>
										<tr height="40px">				        
										     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="所在地区" data-role="lang">所在地区</span>：</td>
										     <td><input class="joy-combobox joy-enum" 
													style="width: 93px;" placeholder="请选择"
													databind="source:addPro,value:provinceId" id="dp_pro"
													dataTextField="name" dataValueField="areaId" change="bindCity">
				
												<input class="joy-combobox joy-enum" placeholder="请选择"
													databind="source:addCity,value:cityId" style="width: 93px;"
													id="dp_city" dataTextField="name" dataValueField="areaId"
													change="bindArea"> <input class="joy-combobox joy-enum"
													placeholder="请选择" databind="source:addArea,value:areaId"
													style="width: 93px;" id="dp_area" dataTextField="name"
													dataValueField="areaId">
											</td>
										</tr>
										<tr height="40px">				        
										     <td align="right"><font class="k-form-required">&nbsp;*</font><span class="joy-lang" label="详细地址" data-role="lang">详细地址</span>：</td>
										     <td><textarea id="addr" class="joy-textarea" required="true" 
												 id="detailAddress"  databind="value:addr" maxByte="128"
												placeholder="建议您如实填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息"></textarea>
											</td>
										</tr>
								</tbody>
						 </table>
						<!-- 
						<p>
						  	<label>用户账号:</label> 
							<span id="personAccount" class="joy-label" 
								databind="value:account"></span>
						</p>
						<p>
							<input class="joy-combobox joy-enum"
								required="true" id="deviceCd" dataTextField="deviceCd" label="序列号"
								dataValueField="deviceCd"
								databind="value:deviceCd,source:deviceCd_Enum"
								style="width: 280px;" />
						</p>
						<p>
							<input class="joy-combobox joy-enum" label="配件"
								required="true" id="machineType"
								databind="value:machineTypeEk,source:MACHINE_TYPE_EKEnum"
								style="width: 280px;" />
						</p>
						<p>
							<input class="joy-combobox joy-enum" label="邮费支付方式"
								required="true" id="payMode"
								databind="value:payModeEk,source:PAY_MODE_EKEnum"
								style="width: 280px;" />
						</p>
						<p>
						<label></label> <input type="checkbox" checked="checked"
							id="isDefalutAccount" style="width: 20px;" />默认账户收件方式
                         </p>
						<p>
							<input id="receiver" class="joy-textbox" label="收货人"
								placeholder="请输入收货人" required="true" maxByte="30"
								databind="value:receiver" />
						</p>
						<p>
							<input id="mobile" class="joy-textbox" label="手机号码"
								placeholder="请输入手机号码" required="true" maxByte="30"
								dataType="tel" databind="value:mobile" />
						</p>
						<p>
							<input class="joy-combobox joy-enum" label="所在地区"
									style="width: 93px;" placeholder="请选择"
									databind="source:addPro,value:provinceId" id="dp_pro"
									dataTextField="name" dataValueField="areaId" change="bindCity">

								<input class="joy-combobox joy-enum" placeholder="请选择"
									databind="source:addCity,value:cityId" style="width: 93px;"
									id="dp_city" dataTextField="name" dataValueField="areaId"
									change="bindArea"> <input class="joy-combobox joy-enum"
									placeholder="请选择" databind="source:addArea,value:areaId"
									style="width: 93px;" id="dp_area" dataTextField="name"
									dataValueField="areaId">
						</p>
						<p>
							<textarea id="addr" class="joy-textarea" required="true" style="width: 285px;"
									label="详细地址" id="detailAddress"  databind="value:addr" 
									placeholder="建议您如实填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息"></textarea>
						</p> -->
						
						<div id="sure">
						     <button class="joy-button"  onclick="saveSerialReg" style="background:url('../../style/prj/images/sure.png');height: 26px;width: 56px;"></button>
						</div>					
		                <a href="wlEsApply.html"><div id="back"></div></a> 

					</form>
				</div>

			</div>
		</div>

	</div>

	<!--账号信息开始-->




	<div class="footer">

		<!--联系我们开始-->
		<div id="contantUs">
			<div id="left">
				<div id="top">联系我们</div>
				<div id="bottom">CONTACT US</div>

			</div>

			<div id="right">
				<div id="top">
					<div class="tel">
						<img width="24" height="25" src="../../style/prj/images/tel.png">
						&nbsp;<span id="tel">电话:0592-5923510 / 5923128</span>
					</div>
					<div class="fax">
						<img width="24" height="25" src="../../style/prj/images/fax.png">
						&nbsp;<span id="fax">传真:0592-5061718</span>
					</div>
					<div class="email">
						<img width="24" height="25" src="../../style/prj/images/email.png">
						&nbsp;<span id="email">邮箱:info@waterrower.com.cn</span>
					</div>
				</div>
				<div id="bottom">
					<img width="24" height="25"
						src="../../style/prj/images/address.png">
						&nbsp;<span id="corpAddr">地址:厦门市塔埔东路166号8层（观音山国际商务运营中心11号楼8层）</span>
				</div>
			</div>
		</div>
		<!--联系我们结束-->
		<div class="footerInfo">
			<div class="footerInfoContainer">
				<div class="footerInfoLeft">
					<img style="width: 269px; height: 32px"
						src="../../style/prj/images/LOGO-269x32.png" />
				</div>
				<div class="footerInfoRight">
					<div>
						<a href="wlCmSecrecyRules.html">保密规则</a>/ <a
							href="wlCmUseOfTerms.html">使用条款</a> / <a href="wlCmMap.html">网站地图</a>
						/<a href="wlCmcontactUs.html"> 关于我们</a> /<a
							href="wlCmSafetyPrecautions.html"> 安全预防措施</a>
					</div>
					<div>
						闽ICP备15007220号-2 | Copyright © 2014-2016 WaterRower.com.cn 版权所有 | 技术支持：<a
							href="http://www.xmguitian.com/" target="_Blank">硅田系统</a>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script>
	//变量 
	var applyForm,lgc;
    var payModeEk="",machineTypeEk="",account="",receiver = "",mobile ="",deviceCd="";
    var provinceId="",cityId="",areaId="",addr="";
    var deviceCdModel = new Object();//初始化序列号枚举对象
	var areaModel = new Object();//初始化区域枚举对象
		$(function(){
		$("#online_qq_layer").attr("show","1");
         //$('input, textarea').placeholder();
			$("#applyForm p").eq(7).children(".k-form-label").eq(1).remove();
			$("#applyForm p").eq(7).children(".k-form-label").eq(1).remove();
			applyForm = $("#applyForm").getJoyForm();
			lgc = joy.getCommonLang();
			//proAreaInit();
              init();
		});	
		
		 
		//初始化表单数据
		function init(){
			
			joy.getJSON("../../wl/es/wlEsApplyAction.web?action=init",
					{enumTypes:['PAY_MODE_EK','MACHINE_TYPE_EK']},	
					function(resultObject) {
						
						var viewModel = joy.observable(resultObject);    
			        	joy.bind($(".joy-enum"), viewModel);
			        	payModeEk=resultObject.PAY_MODE_EKEnum[0].value;
			        	machineTypeEk=resultObject.MACHINE_TYPE_EKEnum[0].value;
			        	  $("#postAge").html(resultObject.postAge);
							joy.getJSON("../../wl/cm/wlCmMemberAction.web?action=getTableData",{}, function(resultObject){	//获取账号信息
								 if(resultObject!=null){
	    		     				account = resultObject.account;
		    		     			//receiver = resultObject.name;
		    			 			//mobile =resultObject.mobile;
								  }
	    			 			//applyForm.load({machineTypeEk:machineTypeEk,payModeEk:payModeEk,account:account,name:name,contact:mobile});
			    			 		joy.getJSON("../../wl/es/wlEsSerialRegAction.web?action=findDeviceCdList",{}, //获取序列号
			    		 			function(resultObject){	
			    			 			      
			    			 			      if(resultObject.length>0){
			    			 			    	  deviceCd=resultObject[0].deviceCd;
			    			 			      }
			    			 			    	deviceCdModel.deviceCd_Enum=resultObject;
			    			    			    joy.bind($("#deviceCd"), deviceCdModel);
			    			    			    //获取收货地址
			    			    			    joy.getJSON(
			    			    					"../../wl/es/wlEsMyDeliveryAddrAction.web?action=getDeliveryAddr",
			    			    					{
			    			    						
			    			    					}, function(resultObject) {	
			    			    						if(resultObject!==null){
				    			    						receiver = resultObject.receiver;
				    			    			 			mobile =resultObject.mobile;
				    			    						$("#isDefalutAccount").prop('checked', true);

			    			    						}
							    			 			 applyForm.load({deviceCd:deviceCd,machineTypeEk:machineTypeEk,payModeEk:payModeEk,account:account,receiver:receiver,mobile:mobile,name:receiver});
							    			 			 getAddr(resultObject);
			    			    					});	
										});	
							});	
				});	
		}
		
		//初始化省级列表
		function proAreaInit() {
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : ""
				}, function(result) {
					areaModel.addPro = result;
					joy.bind($("#dp_pro"), areaModel);
					$("#dp_city").getJoyComboBox().value("");
				});
		}
    //绑定市
		function bindCity() {
			var proV = $("#dp_pro").getJoyComboBox().value();
			if (proV == "") {
				return;
			}
			//获取省下的市数据
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : proV
				}, function(resultObject) {
					areaModel.addCity = resultObject;
					joy.bind($("#dp_city"), areaModel);
					$("#dp_city").getJoyComboBox().value("");
					$("#dp_area").getJoyComboBox().value("");
				});
		}

		//绑定区
		function bindArea() {
			var proV = $("#dp_pro").getJoyComboBox().value();
			var city = $("#dp_city").getJoyComboBox().value();
			if (proV == "" || city == "")
				return;
			//获取市下的区数据
			joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : city
				}, function(resultObject) {
					areaModel.addArea = resultObject;
					joy.bind($("#dp_area"), areaModel);
					$("#dp_area").getJoyComboBox().value("");
				});
		}
		//获取收货地址
		
	function getAddr(resultObject){		
					if(resultObject===null){
						proAreaInit();
					}else{
						 provinceId=resultObject.provinceId;
						 cityId=resultObject.cityId;
						 areaId=resultObject.areaId;
						 addr=resultObject.addr;
						 $("#addr").getJoyTextarea().value(resultObject.addr);
						 showAddr();
					}			
	}
		
   //回显当前用户的收货地址
   function showAddr(){
	   //显示省
	   joy.getJSON("../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : ""
				}, function(result) {
					areaModel.addPro = result;
					joy.bind($("#dp_pro"), areaModel);
			 	$("#dp_pro").getJoyComboBox().value(provinceId);							
				});
	   //显示市
		   joy.getJSON(
				"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
				{
					parentId : provinceId
				}, function(resultObject) {
					areaModel.addCity = resultObject;
					joy.bind($("#dp_city"), areaModel);
					$("#dp_city").getJoyComboBox().value(
							cityId);
				});
	   //显示区
		   joy.getJSON(
					"../../wl/cm/wlCmAreaAction.web?action=findAreaByParentId",
					{
						parentId : cityId
					}, function(resultObject) {
						areaModel.addArea = resultObject;
						joy.bind($("#dp_area"), areaModel);
						$("#dp_area").getJoyComboBox().value(
								areaId);
					});
	   
   }
   
   $("#isDefalutAccount").click(function(){
		var data = $("#isDefalutAccount").is(':checked');
		deviceCd=$("#deviceCd").getJoyComboBox().value();
		if ($("#isDefalutAccount").is(':checked')) {
			applyForm.load({account:account,deviceCd:deviceCd,payModeEk:payModeEk,machineTypeEk:machineTypeEk,receiver:receiver,mobile:mobile,provinceId:provinceId,cityId:cityId,areaId:areaId,addr:addr,name:receiver});
		}else{
			applyForm.load({account:account,deviceCd:deviceCd,payModeEk:payModeEk,machineTypeEk:machineTypeEk,name:receiver});
		}
	});
   
   //保存
   function saveSerialReg(buttonObject){
	   
		//保存按钮不可用，防止重复提交
	 	buttonObject.enable(false); 
	    
		if (!applyForm.validate()) {
			joy.showMessage(lgc.validateFaile, "warning");
			buttonObject.enable(true);
			return;
		}

		if ($("#dp_pro").getJoyComboBox().value() == "") {
			joy.showMessage("请选择省份！", "warning");
			buttonObject.enable(true);
			return ;
		}

		if ($("#dp_city").getJoyComboBox().value() == "") {
			joy.showMessage("请选择市区！", "warning");
			buttonObject.enable(true);
			return ;
		}

		var submitda = applyForm.getDataModel().toJSON();
		submitda.provinceId=$("#dp_pro").getJoyComboBox().value();	
		submitda.areaId=$("#dp_area").getJoyComboBox().value();	
		submitda.cityId=$("#dp_city").getJoyComboBox().value();	
		submitda.addr=$("#addr").getJoyTextarea().value();
		applyForm.load(submitda);
		 applyForm.submit("../../wl/es/wlEsApplyAction.web?action=saveData",
				buttonObject, function(resultObject) {
			    joy.showMessage(lgc.opSuccess, "success");
				buttonObject.enable(true);
				if(resultObject.orderId==""){//如果为空，则为货到付款
				   window.location="wlEsApply.html";
				}else{//如果不为空,则为在线支付，跳到支付界面					
					   joy.showMessageDialog("订单已生成，订单号为"+resultObject.orderNo+"，您确定去支付？", "ok,cancel", function(e) {
							if (e.btnName == "ok") {	
								   window.location="wlEsSuccessOrder.html?orderId="+resultObject.orderId;
							}else{
								   window.location="wlEsApply.html";

							}
						});
				}
				return;
			})
	   
   }
   window.history.forward(1); 
  </script>
  <script type="text/javascript" src="../../js/site/cnzz.js"></script>
</body>
</html>

<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="Generator" content="waterrower Team">
    <meta name="Author" content="waterrowerTeam">
    <meta name="Keywords" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">
    <meta name="Description" content="沃特罗伦WaterRower（直译水划船机）始创于1988年。由美国国家划船队John Duke与耶鲁大学联合设计，并获发明专利。不仅是品牌，更是划船器水阻化的标志性里程碑。">

     <script src="../../js/site/getParam.js" type="text/javascript"></script>
     <script src="../../js/newsite/getSystemPlatform.js"></script>
     <script src="../../js/newsite/jquery.min.js"></script>
    <script src="../../js/joy.loader.js" modules="form,dataview,advgrid,layout,editor"></script>
    
    <script src="../../js/newsite/bootstrap.js"></script>
    <script src="../../js/newsite/cnzz.js"></script>
    <script src="../../js/newsite/jquery-1.5.js" type="text/javascript"></script>
    <script src="../../js/newsite/jquery.jqzoom-core.js" type="text/javascript"></script>
   	<script src="../../js/newsite/wlcommon.js"></script>
    
	<link rel="stylesheet" href="../../style/prj/newsite/header.css"/>
	<link rel="stylesheet" href="../../style/prj/newsite/footer.css"/>
    <link rel="stylesheet" href="../../style/prj/newsite/bootstrap.min.css"/>
	<link rel="stylesheet" href="../../style/prj/newsite/wlcommon.css"/>
    <link rel="stylesheet" href="../../style/prj/newsite/jquery.jqzoom.css"/>
    <link rel="stylesheet" href="../../style/prj/newsite/productDetail.css"/>
   
  <script type="text/javascript">
  jQuery.noConflict();//将变量$的控制权释放出来
  </script>
  <!-- 控制编辑器中图片的宽度 -->
  <style type="text/css">
	  	#detailTabContent img {
	  		 max-width: 100%;
	  	}
  </style>
</head>
<body>
<!-- 头部 -->
	<div id="top">
		<div id="commonpath" style="display: none;" commonpath=""></div>
	</div>

  <!-- 内容 -->
  <div id="wlBody" >
     <div class="container" style="margin-top: 150px;">
         <div class="row">
         	<div class="col-md-5 col-sm-12 col-xs-12">
	         	<div class="clearfix moreImg" id="content" >
	                 <div id="jqzoomContainer" class="clearfix">
	                    <a id="jqzoomPic"  href="../../style/prj/images/imgProd/triumph_big1.jpg" class="jqzoom" rel='gal1' >
	                         <img  class="small_img" id="jqzoomImg" src="../../style/prj/images/imgProd/triumph_small1.jpg">
	                     </a> 
	                 </div>
	                 <br/>
	                 <span class="moreView">更多视角</span>
	                 <div class="clearfix" >
	                     <ul  class="clearfix imgList" id="smallPic">
	                       <!--  <li><a class="zoomThumbActive" href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small1.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big1.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb1.jpg'></a></li>
	                         <li><a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small2.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big2.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb2.jpg'></a></li>
	                         <li><a  href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small3.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big3.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb3.jpg'></a></li>
	                         <li><a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small2.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big2.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb2.jpg'></a></li>
	                         <li><a class="zoomThumbActive" href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small1.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big1.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb1.jpg'></a></li>
	                         <li><a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small2.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big2.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb2.jpg'></a></li>
	                         <li><a  href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small3.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big3.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb3.jpg'></a></li>
	                         <li><a href='javascript:void(0);' rel="{gallery: 'gal1', smallimage: '../../style/prj/images/imgProd/triumph_small2.jpg',largeimage: '../../style/prj/images/imgProd/triumph_big2.jpg'}"><img src='../../style/prj/images/imgProd/thumbs/triumph_thumb2.jpg'></a></li>
	                       -->    
	                     </ul>
	                 </div>
	             </div>
         	</div>
             <div class="col-md-5 col-sm-12 col-xs-12">
             		<div id="right" class="rightShopping">
		                <span class="joy-label goodName" databind="value:productName"></span>
		                 <p class="goodPrice">RMB ￥<span class="joy-label" databind="value:price"></span></p>
		                 <p class="goodFreight goodcolor">运费：￥0.00</p>
		                 <hr class="hengxian"/>
		                 <p class="joy-label goodContent goodcolor" databind="value:memo"></p>
		                 <div style="margin-top: 25px">
		                     <div style="float: left">
		                         <span style="font-size:20px;">数量</span>
		                         <input id="count" type="text" class="goodCount" value="1"/>
		                     </div>
		                     <div style="float: left">
		                         <div class="countAddAndReduce" id="add" >+</div>
		                         <div class="countAddAndReduce" id="reduce">-</div>
		                     </div>
		                     <div style="float: left">
		                     	<a href="javascript:toAddShoppingCar()">
		                     		<img class="buyCarGray" src="../../style/prj/images/buyCarGray.png">
		                     	</a>
		                     </div>
		                 </div>
		                <div><input onclick="javascript:toBuy()" type="button" class="goodBuy" value="立即购买"></div>
		                <!-- <input class="joy-label "  databind="value:price"> -->
		             </div>
             </div>
         </div>
     </div>
      <div class="goodDetail">
          <div class="container">
              <row>
                  <div id="agencyTabContain" style="height: 100px;" >
                      <div id="detailTab" class="bold activeTab"  style="right: 50%">商品详情</div>
                      <div id="specTab" class="bold" style="left: 50%">规格参数</div>
                  </div>
                  <div id="detailTabContent" class="col-md-12 col-sm-12 col-xs-12" style="font-size: 18px;margin-bottom: 31px;">
                      <!-- WaterRower A1 Home是用优质的沉木手工制作的，带有光滑的铝制单轨设计。每台机器都未经染色的，并且用丹麦石油手工完成，为木材提供了一种深深的光泽和温暖。由于生态原因，我们所有的森林都是从可再生的森林中收获的 -->
                  </div>
                  <div id="specTabContent"  style="display:none;width:100%">
                      <table border="1" class="tableStyle" id="itemAttrTable">
                          <!-- <tr >
                              <td class="parameterTdName">框架材料</td>
                              <td class="parameterTdValue">美国曾木（来自可持续黑森林）/铝为黑色粉末涂层</td>
                          </tr>
                          <tr>
                              <td class="parameterTdName">训练监测</td>
                              <td class="parameterTdValue">波形检测</td>
                          </tr>
                          <tr>
                              <td class="parameterTdName">心率检测</td>
                              <td class="parameterTdValue">无法使用</td>
                          </tr>
                          <tr>
                              <td class="parameterTdName">商品情况</td>
                              <td class="parameterTdValue">新</td>
                          </tr>
                          <tr>
                              <td class="parameterTdName">尺寸</td>
                              <td class="parameterTdValue">2090*565*510mm</td>
                          </tr>
                          <tr>
                              <td class="parameterTdName">保修</td>
                              <td class="parameterTdValue">零件3年，框架5年</td>
                          </tr> -->
                      </table>
                  </div>
              </row>
          </div>
      </div>
      <!-- 配置升级 -->
      <div class="container configureUpdate">
          <span class="configureUpdateText">
              配&nbsp置&nbsp升&nbsp级
          </span>
          <div class="row" style="margin-top: 50px;margin-bottom: 50px" id="allocations">
              <!-- <div class="col-md-3">
                  <img src="../../style/prj/images/waterrower.png" class="img-responsive marginCenter" >
                  <p class="configureName">WaterRower把手手套</p>
                  <p class="configurePrice">RMB￥359</p>
                  <p class="configureCar"><span class="textBold">+</span>加入购物车</p>
              </div>
              <div class="col-md-3">
                  <img src="../../style/prj/images/waterrower.png" class="img-responsive marginCenter" >
                  <p class="configureName">WaterRower把手手套</p>
                  <p class="configurePrice">RMB￥359</p>
                  <p class="configureCar"><span class="textBold">+</span>加入购物车</p>
              </div>
              <div class="col-md-3">
                  <img src="../../style/prj/images/waterrower.png" class="img-responsive marginCenter"  >
                  <p class="configureName">WaterRower把手手套</p>
                  <p class="configurePrice">RMB￥359</p>
                  <p class="configureCar"><span class="textBold">+</span>加入购物车</p>
              </div>
              <div class="col-md-3">
                  <img src="../../style/prj/images/waterrower.png" class="img-responsive marginCenter" >
                  <p class="configureName">WaterRower把手手套</p>
                  <p class="configurePrice">RMB￥359</p>
                  <p class="configureCar"><span class="textBold">+</span>加入购物车</p>
              </div> -->
              
    
       	<div id="addBox" style="display:none;">保存成功</div>
          </div>
      </div>
  </div>

  <!-- 内容结束 -->
    


<!--尾部开始-->
    <div id="footerPart">
        
    </div>

    
    <script>
    		
			//进行页面初始化操作
            jQuery(document).ready(function() {
            	initTop();
            	initClick();
            	initBottom();
                addEvent();//添加事件操作
                removeClass();//判断移动端时，去掉放大镜效果
                
            });
			function removeClass(){
				var _width = $(window).width(); //获取浏览器宽度
				var zoomPupTemp = $(".zoomPup");
				var zoomWindowTemp = $(".zoomWindow");
				if (_width<=990) {
					$(".zoomPup").remove();
					$(".zoomWindow").remove();
				} else {
					$(".small_img").append(zoomPupTemp);
					$(".zoomPad").append(zoomWindowTemp);
				}
			}
			//添加事件操作
			function addEvent(){
		        $("#agencyTabContain div").click(function(){
		            $(".activeTab").removeClass("activeTab");
		            $(this).addClass("activeTab");
		            id=$(this).attr("id");
		            if(id=="detailTab"){//当前点击的是网店查询
		                $("#detailTabContent").show();
		                $("#specTabContent").hide();
		            }else if(id=="specTab"){//当前点击的是联系我们
		                $("#specTabContent").show();
		                $("#detailTabContent").hide();
		            }
		        });
		        jQuery('.jqzoom').jqzoom({
                    zoomType: 'standard',
                    lens:true,
                    preloadImages: false,
                    alwaysOn:false
                });
			}
        //限制只能输入十六进制字符，即大写字母和数字
        limitHex=function(limit){
            var val=this.value;
            //val=val.replace(/([^\u0000-\u00FF])/g,"");
            val=val.replace(/[^0-9]/g,"");
            length=val.length;
            if(length>limit){
                val=val.substr(0,limit);
            }
            this.value=val;
        }
        $("#count").keyup(function(){
            limitHex.call(this,2);
            if( $("#count").val().length<1){
                $("#count").val(1);
            }
        });//epc只能输入十六进制且只能输入24个十六进制字符
        $("#count").blur(function(){
            limitHex.call(this,2)
            if( $("#count").val().length<1){
                $("#count").val(1);
            }
        });

        /**
         * 数量+1
         */
        $("#add").click(function(){
            var value= $("#count").val();
            if(parseInt(value)<99){
                $("#count").val(parseInt(value)+1);
            }
        });
        /**
         * 数量-1
         */
        $("#reduce").click(function(){
            var value= $("#count").val();
            if(parseInt(value)>1){
                $("#count").val(parseInt(value)-1);
            }
        });
        
        
        
        //======================================================================
       var sellId="";
       var itemId = "";
       $(function () {
    	   	//获取产品ID
           	sellId=getParam("sellId");
            //获取产品描述信息
			showProDesc();
            //获取产品图片
			showProPics();
           	//配置升级
           	showSellAllocation();
	     	
        });
        //获取产品描述信息
        function showProDesc(){
        	joy.getJSON("../../wl/cm/wlCmSellAction.dox?action=getData",{sellId:sellId},function(result){
        		//详细介绍
        		$("#detailTabContent").html(result.content);
				//绑定数据
        		var viewModel = joy.observable(result);
				joy.bind($("#wlBody"), viewModel);
	            //获取规格数据
	            itemId = result.itemId;
	            showItem(itemId);
	        /*     $("#detailTabContent img").each(function(i,n){
					$(n).addClass("img-responsive");
				}) */
        	});
        }
        
        //产品图片
        function showProPics(){
        	joy.getJSON("../../wl/cm/wlCmSellAction.dox?action=findSellPic",{sellId:sellId},function(result){
        		var txtPics="";
        		var firstImgSrc	= '';
		     	for(var i=0;i<result.length;i++){	
		     		var ob=result[i];
		     		txtPics += '<li>';
			     		txtPics += '<a class="zoomThumbActive" href="javascript:void(0);" rel="{gallery: "gal1", smallimage: "../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path+'",largeimage: "../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path+'"}">';
			     			txtPics += '<img  src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path+'" class="gdImg">';
			     		txtPics += '</a>'; 
		     		txtPics += '</li>';
					//默认第一张为展现图
		     		if (i==0) {
		     			//firstImgSrc = '../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path;
						$("#jqzoomImg").attr('src','../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path);		
						$("#jqzoomPic").attr('href','../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.path);
		     		}
		    	} 
		     	//$("#jqzoomImg").attr("src",firstImgSrc);//第一张图片
	        	$("#smallPic").append(txtPics);
	        	$(".zoomThumbActive img").bind("click",function(){
		     		var Src = $(this).attr("src");
		     		$("#jqzoomContainer a").attr("href",Src);
		     		$("#jqzoomContainer img").attr("src",Src);
		     		$("#jqzoomImg").attr('src', Src);		
					$("#jqzoomPic").attr('href', Src);
					$(".zoomWrapperImage img").css('width','500px');
		     	});
		    });
        }
        //规格参数
        function showItem(itemId){
        	joy.getJSON("../../wl/cm/wlCmSellAction.dox?action=findItemAttrList&languageType=CN",{itemId:itemId},function(result){
        		if (result.length<=0) {
        			$("#specTab").hide();
        		} else {
	        		var attrs="";
			     	for(var i=0;i<result.length;i++){	
			     		var ob=result[i];
			     		attrs += '<tr >';
			     		attrs += '<td class="parameterTdName">' + ob.attrName + '</td>';
			     		attrs += '<td class="parameterTdValue">' + ob.attrValue + '</td>';
			     		attrs += '</tr>';
			    	} 
		        	$("#itemAttrTable").append(attrs);
        		}
		    });
        }
        //配置升级
        function showSellAllocation(){
        	joy.getJSON("../../wl/cm/wlCmSellAction.dox?action=findSellAllocationList",{sellId:sellId},function(result){
        		var allocations="";
		     	for(var i=0;i<result.length;i++){	
		     		var ob=result[i];
		     		allocations += '<div class="col-md-3">';
		     		allocations += '<div class="configureCar" onclick="toProductDetail(\''+ob.sellId+'\')">';
		     		allocations += '<img src="../../wl/cm/wlCmDocumentAction.dox?action=downloadFile&id='+ob.picPath+'" class="img-responsive marginCenter" >';
		     	/* 	allocations += '<div class="row">';
		     		allocations += '<img src="../../style/prj/images/waterrower.png" class="img-responsive marginCenter" >'; */
		     		allocations += '<p class=" configureName">' + ob.productName + '</p>';
		     		allocations += '<p class="configurePrice">RMB￥' + ob.price + '</p>';
		     		allocations += '</div>';
		     		allocations += '<p class="configureCar" onclick="addShoppingCar(\''+ob.sellId+'\',1)" id="addShoppingCar"><span class="textBold">+</span>加入购物车</p>';
		     		allocations += '</div>';
		    	}  
	        	$("#allocations").append(allocations);
		    });
        }
        //跳转到商品详情页面
        function toProductDetail(sellId){
        	window.location = "productDetail.html?sellId=" + sellId;	
        }
        //加入购物车
        /* jQuery("#addShoppingCar").live("click",function(){
        	//加入购物车
        	addShoppingCar();
        	
        }); */
        //购买
        function toBuy(){
        	var num=$("#count").val();
        	 joy.getJSON("../../wl/es/wlEsMyShoppingCartAction.web?action=validateInventory",{sellIds:sellId,nums:num,language:"chinese"},function(resultObject){
        		window.location='submitOrder.html?source=instantlyBuy&sellId='+sellId+"&num="+$("#count").val();
        	 });
        }
        //弹窗
        function tankuang(pWidth,content)
        {    
            $("#msg").remove();
            var html ='<div id="msg" style="position:fixed;top:50%;width:100%;height:30px;line-height:30px;margin-top:-15px;"><p style="background:gray;opacity:0.8;width:'+ pWidth +'px;color:#fff;text-align:center;padding:10px 10px;margin:0 auto;font-size:12px;border-radius:4px;">'+ content +'</p></div>'
                    $("body").append(html);
                    var t=setTimeout(next,2000);
                    function next()
                    {
                        $("#msg").remove();
                        
                    }
        }
        //加入购物车
        function addShoppingCar(sellId, num){
        	if(isLogin){
			          joy.getJSON("../../wl/es/wlEsMyShoppingCartAction.web?action=addToShoppingCart",{sellId:sellId, num:num},function(resultObject){
			        	  if(resultObject!==""){
				        	  tankuang(150, resultObject);
			        	 }else{
			        		 tankuang(150, "添加成功");
			        		 initShopCar();//刷新头部购物车图标
			        	 } 
			          });
	      	}else{
	      		tankuang(150, "加入购物车,请先登录！");
	      	}
        }
        function toAddShoppingCar(){
        	var num = $("#count").val();
        	console.log(num);
        	addShoppingCar(sellId, num);
        }
    </script>
</body>
</html>
<!--尾部结束-->

</body>
</html>